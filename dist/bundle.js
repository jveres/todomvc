!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(31)},function(t,e){t.exports=function(t,e){return"string"==typeof t?t:t+e}},function(t,e){var n="";if("undefined"!=typeof document){var o=document.documentElement||document.createElement("div");n=null!=o.style.animation?"":"-webkit-"}t.exports=n},function(t,e,n){function o(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&a(g(t))}function i(t,e){return t="number"==typeof t||f.test(t)?+t:-1,e=null==e?y:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function s(t){for(var e=c(t),n=e.length,o=n&&t.length,r=!!o&&a(o)&&(h(t)||l(t)),s=-1,u=[];++s<n;){var p=e[s];(r&&i(p,o)||m.call(t,p))&&u.push(p)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||l(t))&&e||0;for(var n=t.constructor,o=-1,r="function"==typeof n&&n.prototype===t,s=Array(e),c=e>0;++o<e;)s[o]=o+"";for(var p in t)c&&i(p,e)||"constructor"==p&&(r||!m.call(t,p))||s.push(p);return s}var p=n(20),l=n(21),h=n(22),f=/^\d+$/,d=Object.prototype,m=d.hasOwnProperty,b=p(Object,"keys"),y=9007199254740991,g=o("length"),_=b?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?s(t):u(t)?b(t):[]}:s;t.exports=_},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(o);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,o=-1,i=r(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(o=-1;++o<e;)s[o]=n[o];return s[e]=a,t.apply(this,s)}}var o="Expected a function",r=Math.max;t.exports=n},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=l[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(s(o.parts[i],e))}else{for(var a=[],i=0;i<o.parts.length;i++)a.push(s(o.parts[i],e));l[o.id]={id:o.id,refs:1,parts:a}}}}function r(t){for(var e=[],n={},o=0;o<t.length;o++){var r=t[o],i=r[0],a=r[1],s=r[2],u=r[3],c={css:a,media:s,sourceMap:u};n[i]?n[i].parts.push(c):e.push(n[i]={id:i,parts:[c]})}return e}function i(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function a(){var t=document.createElement("link"),e=d();return t.rel="stylesheet",e.appendChild(t),t}function s(t,e){var n,o,r;if(e.singleton){var s=b++;n=m||(m=i()),o=u.bind(null,n,s,!1),r=u.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),o=p.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),o=c.bind(null,n),r=function(){n.parentNode.removeChild(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}function u(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function c(t,e){var n=e.css,o=e.media;if(e.sourceMap,o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,o=(e.media,e.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}var l={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,b=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f());var n=r(t);return o(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=l[s.id];u.refs--,i.push(u)}if(t){var c=r(t);o(c,e)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete l[u.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){function o(t,e,n){for(var o=n&&n.clearTransforms===!0,i=0,a=t.length;a>i;i++)o&&r(t[i]),t[i].style[l]=e}function r(t){t.style.transform="",t.style[d]=""}function i(t){t.style[l]="",t.style.animation=""}function a(t,e){for(var n=e&&e.clearAnimations===!0,o=0,r=t.length;r>o;o++)t[o].style[d]=getComputedStyle(t[o])[d],n&&i(t[o])}var s=n(13),u=n(25),c=n(12),p=n(10),l=n(8),h=n(23),f=n(1);if("undefined"!=typeof window)var d=n(26);var m={},b={duration:1e3,fillMode:"both",easing:"ease",iterations:1,delay:0,direction:"normal",resetWhenDone:!1,clearTransformsBeforeStart:!1};e.hasAnimation=function(t){return m.hasOwnProperty(t)},e.runAnimation=h(function(t,e,n){if(n||(n=function(){}),"string"==typeof e&&(e={name:e}),t.length||(t=[t]),!e.name)return n(Error("must supply animation name"));var r=m[e.name];if(!r)return n(Error('no animation named "'+e.name+'" exists'));e=s(e,r.presets,b);var i=function(){return u.remove(t[0],"AnimationEnd",i),e.resetWhenDone&&a(t,{clearAnimations:!0}),n(null,t)};u.add(t[0],"AnimationEnd",i);var c=[e.name,f(e.duration,"ms"),e.easing,e.iterations,f(e.delay,"ms"),e.direction,e.fillMode];o(t,c.join(" "),{clearTransforms:e.clearTransformsBeforeStart})}),e.unregisterAnimation=function(t){if(e.hasAnimation(t)){var n=m[t].el;n.parentNode.removeChild(n),delete m[t]}},e.getAnimationCSS=p,e.registerAnimation=function(t){e.unregisterAnimation(t.name);var n=c(e.getAnimationCSS(t.name,t.animation));n.setAttribute("data-name",t.name),m[t.name]={el:n,presets:t.presets||{}}}},function(t,e,n){var o=n(2);t.exports=o?"webkitAnimation":"animation"},function(t,e,n){function o(t,e){return t.hasOwnProperty(e)?t[e]:0}var r=n(1);t.exports=function(t){var e=[];return Array.isArray(t)?e=2===t.length?e.concat(t,0):t:(e.push(o(t,"x")),e.push(o(t,"y")),e.push(o(t,"z"))),e=e.map(function(t){return r(t,"px")}),"translate3d("+e.join(",")+")"}},function(t,e,n){function o(t,e){return"number"==typeof t?t+="%":"string"==typeof t&&-1===t.indexOf("%")&&(t+="%"),t+"{"+r(e)+"}"}var r=n(11),i=n(2);t.exports=function(t,e){var n="@"+i+"keyframes "+t+"{";if(Array.isArray(e))n+=e.map(function(t,n){var r;return r=n?n/(e.length-1)*100:0,o(r,t)}).join("");else for(var r in e)n+=o(r,e[r]);return n+="}"}},function(t,e,n){var o=n(9),r=n(2),i=n(1),a={scale:function(t){return"scale("+t+")"},rotate:function(t){return"rotate("+i(t,"deg")+")"},translate:function(t){return o(t)},transform:function(t){return t}};t.exports=function(t){if(Array.isArray(t))return r+"transform:"+o(t);var e=[],n=[];if("object"==typeof t)for(var i in t)a[i]?e.push(a[i](t[i])):n.push(i+":"+t[i]);return n.push(r+"transform:"+e.join("")),n.join(";")}},function(t,e){function n(t,e){e||(e=document);var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(n,o):e.documentElement.appendChild(n)}var r=e.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.createTextNode(t)),n.appendChild(r),r}t.exports=n},function(t,e,n){function o(t,e){return void 0===t?e:t}function r(t,e){return a(function(n){var o=n[0];return null==o?o:(n.push(e),t.apply(void 0,n))})}var i=n(14),a=n(4),s=r(i,o);t.exports=s},function(t,e,n){function o(t,e,n){for(var o=-1,r=a(e),i=r.length;++o<i;){var s=r[o],u=t[s],c=n(u,e[s],s,t,e);(c===c?c===u:u!==u)&&(void 0!==u||s in t)||(t[s]=c)}return t}var r=n(15),i=n(17),a=n(3),s=i(function(t,e,n){return n?o(t,e,n):r(t,e)});t.exports=s},function(t,e,n){function o(t,e){return null==e?t:r(e,i(e),t)}var r=n(16),i=n(3);t.exports=o},function(t,e){function n(t,e,n){n||(n={});for(var o=-1,r=e.length;++o<r;){var i=e[o];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function o(t){return a(function(e,n){var o=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,c,5),a-=2):(s="function"==typeof c?c:void 0,a-=s?1:0),u&&i(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++o<a;){var p=n[o];p&&t(e,p,s)}return e})}var r=n(18),i=n(19),a=n(4);t.exports=o},function(t,e){function n(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,o,r){return t.call(e,n,o,r)};case 4:return function(n,o,r,i){return t.call(e,n,o,r,i)};case 5:return function(n,o,r,i,a){return t.call(e,n,o,r,i,a)}}return function(){return t.apply(e,arguments)}}function o(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&a(p(t))}function r(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&e>t}function i(t,e,n){if(!s(n))return!1;var i=typeof e;if("number"==i?o(n)&&r(e,n.length):"string"==i&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,c=9007199254740991,p=n("length");t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}function o(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function r(t){return i(t)&&h.call(t)==s}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:r(t)?f.test(p.call(t)):n(t)&&u.test(t)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,l=c.hasOwnProperty,h=c.toString,f=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},function(t,e){function n(t){return!!t&&"object"==typeof t}function o(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&i(l(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function a(t){return n(t)&&r(t)&&u.call(t,"callee")&&!c.call(t,"callee")}var s=Object.prototype,u=s.hasOwnProperty,c=s.propertyIsEnumerable,p=9007199254740991,l=o("length");t.exports=a},function(t,e){function n(t){return!!t&&"object"==typeof t}function o(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function i(t){return a(t)&&d.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:i(t)?m.test(h.call(t)):n(t)&&p.test(t)}var u="[object Array]",c="[object Function]",p=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,f=l.hasOwnProperty,d=l.toString,m=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=o(Array,"isArray"),y=9007199254740991,g=b||function(t){return n(t)&&r(t.length)&&d.call(t)==u};t.exports=g},function(t,e,n){(function(e){var o,r=n(24),i=Array.prototype.slice;"undefined"!=typeof window&&(o=window.Promise),"undefined"!=typeof e&&(o=e.Promise),t.exports=function(t){return o?function(){var e=i.call(arguments),n=this;return r(e.slice(-1))?t.apply(n,e):new o(function(o,r){e.push(function(t,e){t?r(t):o.apply(this,i.call(arguments,1))}),t.apply(n,e)})}:t}}).call(e,function(){return this}())},function(t,e){function n(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=n;var o=Object.prototype.toString},function(t,e){t.exports=function(){"use strict";function t(t,e){if(!t)throw new Error(e)}function e(){}var n=["webkit","moz","MS","o",""];return{add:function(o,r,i){i=i||e,t(o,"element is required"),t(r,"type is required");for(var a=0;a<n.length;a++)n[a]||(r=r.toLowerCase()),o.addEventListener(n[a]+r,i,!1)},remove:function(o,r,i){i=i||e,t(o,"element is required"),t(r,"type is required");for(var a=0;a<n.length;a++)n[a]||(r=r.toLowerCase()),o.removeEventListener(n[a]+r,i,!1)}}}()},function(t,e){for(var n,o=["webkitTransform","MozTransform","msTransform","OTransform","transform"],r=document.createElement("p"),i=0;i<o.length;i++)if(n=o[i],null!=r.style[n]){t.exports=n;break}},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,"#heartbox{display:inline-block;opacity:.8}.heart{position:absolute;opacity:0;padding-top:4px}",""])},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,'a,input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-user-drag:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}input{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}hr{margin:20px 0;border:0;border-top:1px dashed #c5c5c5;border-bottom:1px dashed #f7f7f7}button{margin:0;padding:0;border:0;background:none;font-size:100%;vertical-align:baseline;font-family:inherit;font-weight:inherit;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-smoothing:antialiased}body{font:14px Helvetica Neue,Helvetica,Arial,sans-serif;line-height:1.4em;background:#fff;color:#4d4d4d;min-width:230px;max-width:550px;margin:0 auto;font-smoothing:antialiased;font-weight:300;padding:30px}button,input[type=checkbox]{outline:none}.header{position:relative}.header h1{display:inline-block;color:#5dc2af}.edit,.new-todo{position:relative;margin:0;width:100%;font-size:24px;font-family:inherit;font-weight:inherit;line-height:1.4em;border:0;outline:none;color:inherit;padding:6px;border:1px solid #999;box-shadow:inset 0 -1px 5px 0 rgba(0,0,0,.2);box-sizing:border-box;font-smoothing:antialiased}.new-todo{padding:16px 16px 16px 60px;border:none;background:rgba(0,0,0,.003);box-shadow:inset 0 -2px 1px rgba(0,0,0,.03)}.main{position:relative;z-index:2;border-top:1px solid #e6e6e6}label[for=toggle-all]{display:none}.toggle-all{position:absolute;top:-55px;left:-12px;width:60px;height:34px;text-align:center;border:none}.toggle-all:before{content:\'\\276F\';font-size:22px;color:#e6e6e6;padding:10px 27px}.toggle-all:checked:before{color:#737373}.todo-list{margin:0;padding:0;list-style:none;position:relative}.todo-list,.todo-list li{width:100%;max-width:100%}.todo-list li{opacity:0;font-size:24px;border-bottom:1px solid #ededed;display:block;position:absolute;will-change:opacity,transform;-webkit-transition:opacity .3s ease-out;transition:opacity .3s ease-out}.todo-list li:last-child{border-bottom:none}.todo-list li.editing{border-bottom:none;padding:0}.todo-list li.editing .edit{display:block;width:506px;padding:13px 17px 12px;margin:0 0 0 43px}.todo-list li.editing .view{display:none}.todo-list li .toggle{text-align:center;width:40px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.todo-list li .toggle:after{content:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-10 -18 100 135"><circle cx="50" cy="50" r="50" fill="none" stroke="#ededed" stroke-width="3"/></svg>\')}.todo-list li .toggle:checked:after{content:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-10 -18 100 135"><circle cx="50" cy="50" r="50" fill="none" stroke="#bddad5" stroke-width="3"/><path fill="#5dc2af" d="M72 25L42 71 27 56l-4 4 20 20 34-52z"/></svg>\')}.todo-list li label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;padding:15px 60px 15px 15px;margin-left:45px;display:block;max-width:80%;line-height:1.2;-webkit-transition:color .3s;transition:color .3s;-webkit-transform-origin:0 50%;-ms-transform-origin:0 50%;transform-origin:0 50%}.todo-list li.completed label{color:#d9d9d9;text-decoration:line-through}.todo-list li .destroy{display:none;position:absolute;top:0;right:10px;bottom:0;width:40px;height:40px;margin:auto 0;font-size:30px;color:#cc9a9a;margin-bottom:11px;-webkit-transition:color .3s ease-out;transition:color .3s ease-out}.todo-list li .destroy:hover{color:#af5b5e}.todo-list li .destroy:after{content:\'\\D7\'}.todo-list li:hover .destroy{display:block}.todo-list li .edit{display:none}.todo-list li.editing:last-child{margin-bottom:-1px}.footer{color:#777;padding:10px 15px;height:20px;text-align:center;border-top:1px solid #e6e6e6;margin-bottom:40px;position:relative;opacity:0;will-change:opacity,transform;-webkit-transition:opacity .3s ease-out;transition:opacity .3s ease-out}.todo-count{float:left;text-align:left}.todo-count strong{font-weight:300}.filters{margin:0;padding:0;list-style:none;position:absolute;right:0;left:0}.filters li{display:inline}.filters li a{color:inherit;margin:3px;padding:3px 7px;text-decoration:none;border:1px solid transparent;border-radius:3px}.filters li a.selected,.filters li a:hover{border-color:rgba(175,47,47,.1)}.filters li a.selected{border-color:rgba(175,47,47,.2)}.clear-completed,html .clear-completed:active{float:right;line-height:20px;text-decoration:none;cursor:pointer;position:relative}.clear-completed:hover{text-decoration:underline}@media screen and (-webkit-min-device-pixel-ratio:0){.todo-list li .toggle,.toggle-all{background:none}.todo-list li .toggle{height:40px}.toggle-all{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-appearance:none;-moz-appearance:none;appearance:none}}@media (max-width:430px){.footer{height:50px}.filters{bottom:10px}}',""])},function(t,e,n){!function(){function e(t){var n=this;return e.is(n)?void n.opt(t):new e(t)}function n(t){t.fns={},t.fns.is=function(t){return t instanceof Function?!0:!1},t.fns.sum=function(t){var n={task:{},data:{}};return n.end=function(e,n){return t(e,n),t=function(){}},n.add=function(o,r){n.task[r=r||(e.text.is(o)?o:e.text.random())]=!1;var i=function(o,i){n.task[r]=!0,o&&((n.err=n.err||{})[r]=o),n.data[r]=i,e.obj.map(n.task,function(t){return t?void 0:!0})||t(n.err,n.data)},a=n;return e.fns.is(o)?function(){return o.apply({task:a.task,data:a.data,end:a.end,done:i},arguments)}:i},n},t.bi={},t.bi.is=function(t){return t instanceof Boolean||"boolean"==typeof t?!0:!1},t.num={},t.num.is=function(e){return 0===e?!0:isNaN(e)||t.bi.is(e)||t.list.is(e)||t.text.is(e)?!1:!0},t.text={},t.text.is=function(t){return"string"==typeof t?!0:!1},t.text.ify=function(e){return t.text.is(e)?e:JSON?JSON.stringify(e):e&&e.toString?e.toString():e},t.text.random=function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghiklmnopqrstuvwxyz";t>0;)n+=e.charAt(Math.floor(Math.random()*e.length)),t--;return n},t.list={},t.list.is=function(t){return t instanceof Array?!0:!1},t.list.slit=Array.prototype.slice,t.list.sort=function(t){return function(e,n){return e&&n?(e=e[t],n=n[t],n>e?-1:e>n?1:0):0}},t.list.map=function(e,n,o){return t.obj.map(e,n,o)},t.list.index=1,t.obj={},t.obj.is=function(e){return e instanceof Object&&!t.list.is(e)&&!t.fns.is(e)?!0:!1},t.obj.del=function(t,e){return t?(t[e]=null,delete t[e],!0):void 0},t.obj.ify=function(e){if(t.obj.is(e))return e;try{e=JSON.parse(e)}catch(n){e={}}return e},t.obj.copy=function(t){return t?JSON.parse(JSON.stringify(t)):t},t.obj.has=function(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)},t.obj.empty=function(e,n){return e&&t.obj.map(e,function(e,o){return n&&(o===n||t.obj.is(n)&&t.obj.has(n,o))?void 0:o?!0:void 0})?!1:!0},t.obj.map=function(e,n,o){var r,i,a,s,u=0,c=0,p=t.fns.is(n),l=function(t,e){return e!==r?(s=s||{},void(s[t]=e)):(s=s||[],void s.push(t))};if(t.list.is(e)){for(i=e.length;i>u;u++)if(c=u+t.list.index,p){if(a=o?n.call(o,e[u],c,l):n(e[u],c,l),a!==r)return a}else if(n===e[u])return c}else for(u in e)if(p){if(t.obj.has(e,u)&&(a=o?n.call(o,e[u],u,l):n(e[u],u,l),a!==r))return a}else if(n===e[u])return u;return p?s:t.list.index?0:-1},t.time={},t.time.is=function(t){return t?t instanceof Date:+(new Date).getTime()},t.time.now=function(e){return(e=e||t.time.is())>(t.time.now.last||-(1/0))?t.time.now.last=e:t.time.now(e+1)}}e._={soul:"#",meta:"_",HAM:">"},function(t){n(t),t.version=.2,t.is=function(e){return e instanceof t?!0:!1},t.is.value=function(e){if(null===e)return!0;if(e===1/0)return!1;if(t.bi.is(e)||t.num.is(e)||t.text.is(e))return!0;var n;return(n=t.is.soul(e))?n:!1},t.is.value.as=function(e){return t.is.value(e)?e:null},t.is.soul=function(e){if(t.obj.is(e)){var n;if(t.obj.map(e,function(e,o){return n?n=!1:o==t._.soul&&t.text.is(e)?void(n=e):n=!1}),n)return n}return!1},t.is.soul.on=function(e){return e&&e._&&e._[t._.soul]||!1},t.is.node=function(e,n){var o;return t.obj.is(e)&&(o=t.is.soul.on(e))?!t.obj.map(e,function(r,i){return i!=t._.meta?t.is.value(r)?void(n&&n(r,i,e._,o)):!0:void 0}):!1},t.is.graph=function(e,n,o){var r=!1;return t.obj.is(e)?!t.obj.map(e,function(e,i){return e&&i===t.is.soul.on(e)&&t.is.node(e,o)?((n||function(){})(e,i,function(n){n&&t.is.node(e,n)}),void(r=!0)):!0})&&r:!1},t.union=function(e,n,o){var r={count:0,cb:function(){o=o?o()&&null:null}};return r.graph=e.__.graph,r.graph||(r.err={err:t.log("No graph!")}),n||(r.err={err:t.log("No data to merge!")}),(r.soul=t.is.soul.on(n))&&(r.tmp={},r.tmp[r.soul]=n,n=r.tmp),t.is.graph(n,null,function(e,n,o){return o&&(o=o[t._.HAM])&&t.num.is(o[n])?void 0:r.err={err:t.log("No state on "+n+"!")}}),r.err?r:(function(n,o){r.count+=1,t.obj.map(o,function(o,i){if(i=t.is.soul.on(o)){r.count+=1;var a=n[i];return a?void t.HAM(a,o,function(){},function(n,r,i){if(n){var a={};a._=a._||{},a._[t._.soul]=t.is.soul.on(n),r&&(a._[t._.HAM]=a._[t._.HAM]||{},n[r]=a[r]=i,(n._[t._.HAM]=n._[t._.HAM]||{})[r]=a._[t._.HAM][r]=o._[t._.HAM][r]),t.on("union").emit(e,a),e.__.on(t.is.soul.on(a)).emit(a)}},function(){})(function(){(r.count-=1)||r.cb()}):(t.on("union").emit(e,n[i]=o),e.__.on(i).emit(o),void(r.count-=1))}}),r.count-=1}(r.graph,n),r.count||r.cb(),r)},t.union.pseudo=function(e,n,o){var r,i=0;return((o=o||{})._={})[t._.soul]=e,t.is.graph(n,function(e,n){i+=1,r=n,t.HAM(o,e,function(){},function(n,o,r){(n._[t._.HAM]=n._[t._.HAM]||{})[o]=e._[t._.HAM][o],n[o]=r},function(){})}),1!=i?o:void 0},t.HAM=function(e,n,r,i,a){function s(t,e,n,o,r){if(e>t)return{amnesiaQuarantine:!0};if(n>e)return{quarantineState:!0};if(e>n)return{converge:!0,incoming:!0};if(e===n){if(o===r)return{state:!0};if(String(o)<String(r))return{converge:!0,current:!0};if(String(r)<String(o))return{converge:!0,incoming:!0}}return{err:"you have not properly handled recursion through your data or filtered it as JSON"}}return a.max=-(1/0),i.end=!0,t.obj.map(n,function u(c,p){if(p!==t._.meta){i.end=!1;var l,h={incoming:{},current:{}};return h.drift=(h.drift=t.time.is())>(t.time.now.last||-(1/0))?h.drift:t.time.now.last,h.incoming.value=t.is.soul(c)||c,h.current.value=t.is.soul(e[p])||e[p],h.incoming.state=t.num.is(h.tmp=((n._||{})[t._.HAM]||{})[p])?h.tmp:-(1/0),h.current.state=t.num.is(h.tmp=((e._||{})[t._.HAM]||{})[p])?h.tmp:-(1/0),a.max=h.incoming.state>a.max?h.incoming.state:a.max,l=s(h.drift,h.incoming.state,h.current.state,h.incoming.value,h.current.value),l.err?void o.console.log(".!HYPOTHETICAL AMNESIA MACHINE ERR!.",l.err):l.state||l.quarantineState||l.current?void r.call(l,e,p,c):l.incoming?void i.call(l,e,p,c):void(l.amnesiaQuarantine&&(a.wait=!0,a.call(l,e,p,c),t.schedule(h.incoming.state,function(){u(c,p),h.incoming.state===a.max&&(a.last||function(){})()})))}}),i.end&&i.call({},e),function(t){a.last=t||function(){},a.wait||a.last()}},t.on=function(){function e(t){return t?(e.event=e.event||e.create())(t):e.create()}return e.is=function(t){return e instanceof t?!0:!1},e.create=function(){var t=new e.chain;return t.$=function(e){return t.where=e,t}},e.sort=t.list.sort("i"),e.chain=function(){function n(){return this instanceof n?void 0:new n}return n.chain=n.prototype,n.chain.emit=function(e){var n=this,o=n.where,r=arguments,i=(n._=n._||{})[o]=n._[o]||[];(n._[o]=t.list.map(i,function(t,e,n){t&&t.as&&(n(t),t.as.apply(t,r))}))||t.obj.del(i,o)},n.chain.event=function(t,n){if(t){var o=this,r=o.where,i=(arguments,(o._=o._||{})[r]=o._[r]||[]),a={as:t,i:n||0,off:function(){return!(a.as=!1)}};return i.push(a),i.sort(e.sort),a}},n.chain.once=function(t,e){var n=this,o=function(){this.off(),t.apply(this,arguments)};return n.event(o,e)},n}(),e}(),t.roulette=function(e,n){var o=t.is(this)?this:{};if(o._&&o.__.opt&&o.__.opt.uuid){if(t.fns.is(o.__.opt.uuid))return o.__.opt.uuid(e,n);e=e||o.__.opt.uuid.length}return t.text.random(e,n)}}(e),function(t){t.opt=function(t,n){var o=this;return o._=o._||{},o.__=o.__||{},null===t?o:(t=t||{},o.__.opt=o.__.opt||{},o.__.flag=o.__.flag||{start:{},end:{}},o.__.key=o.__.key||{s:{},ed:{}},o.__.graph=o.__.graph||{},o.__.on=o.__.on||e.on.create(),o.__.meta=o.__.meta||function(t){return o.__.meta[t]=o.__.meta[t]||{}},e.text.is(t)&&(t={peers:t}),e.list.is(t)&&(t={peers:t}),e.text.is(t.peers)&&(t.peers=[t.peers]),e.list.is(t.peers)&&(t.peers=e.obj.map(t.peers,function(t,e,n){n(t,{})})),o.__.opt.peers=t.peers||o.__.opt.peers||{},o.__.opt.uuid=t.uuid||o.__.opt.uuid||{},o.__.opt.cb=o.__.opt.cb||function(){},o.__.opt.hooks=o.__.opt.hooks||{},e.obj.map(t.hooks,function(t,n){e.fns.is(t)&&(o.__.opt.hooks[n]=t)}),n||e.on("opt").emit(o,t),o)},e.chain.chain=function(t){var n=e(null);return t=t||this,n.back=t,n.__=t.__,n._={on:e.on.create()},n._.at=function(t){var e=function(e,o,r){var i,a=n._.on(t);(i=((a=n._.on(t)).e=a.e||{})[t])&&setTimeout(function(){e.call(a,i)},0),a[r](function(t){e.call(a,t)},o)};return e.event=function(t,n){return e(t,n,"event")},e.once=function(t,n){return e(t,n,"once")},e.emit=function(e,o){((o=n._.on(t)).e=o.e||{})[t]=e,n._.on(t).emit(e)},e},n},t.get=function(t,n,o){function i(t){var o=s.__.key.s[u.key],r={};e.is.graph(o,function(t,n){r[n]=e.union.pseudo(n),s._.at("soul").emit({soul:n,key:u.key,GET:"SOUL"})}),n.call(s,null,e.obj.copy(o)),n.call(s,null,r),n.call(s,null,{})}function a(t){e.fns.is(u.hook=s.__.opt.hooks.get)?u.hook(t,function(o,i){if(r.log("chain.get ",t,"from hook",o,i,"\n"),o)return n.call(s,o,null);if(!i){if(u.data)return;if(n.call(s,null,null),!u.key||u.soul)return;return s.__.flag.end[u.key]=s.__.flag.end[u.key]||function(t){delete s.__.flag.end[u.key],s._.at("soul").emit(t)},s._.at("null").emit({key:u.key,GET:"NULL"})}return u.data={},e.obj.empty(i)?n.call(s,null,i):e.is.graph(i,function(t,r,a){return(o=e.union(s,t).err)?n.call(s,o,i):(u.key&&((s.__.key.s[u.key]=s.__.key.s[u.key]||{})[r]=s.__.graph[r]),void s._.at("soul").emit({soul:r,key:u.key,GET:"SOUL"}))})?void n.call(s,null,i):n.call(s,{err:e.log("Not a valid graph!")},i)},o):(r.Log("Warning! You have no persistence layer to get from!"),n.call(s,null,null),s._.at("null").emit({key:u.key,GET:"NULL"}))}var s=this.chain(),u={};return t?(u.key=e.text.is(t)&&t,u.soul=e.is.soul(t),n=n||function(){},o=o||{},o.force?a(t):u.soul?((u.node=s.__.graph[u.soul])?((u.graph={})[u.soul]=u.node,n.call(s,null,e.obj.copy(u.graph)),(u.graph={})[u.soul]=e.union.pseudo(u.soul),n.call(s,null,u.graph),n.call(s,null,{})):a(t),u.node=s.__.graph[u.soul]=s.__.graph[u.soul]||e.union.pseudo(u.soul),s._.at("soul").emit({soul:u.soul,GET:"SOUL"})):u.key?s.__.key.s[u.key]?i():(u.flag=s.__.flag.start[u.key])?u.flag.once(i):a(t):n.call(s,{err:e.log("No key or relation to get!")}),s):(n.call(s,{err:e.log("No key or relation to get!")}),s)},t.key=function(t,n,o){function i(i){e.fns.is(s.hook=a.__.opt.hooks.key)?s.hook(t,i.soul,function(t,e){return n.call(a,t,e)},o):(r.Log("Warning! You have no key hook!"),n.call(a,null))}var a=this,s={};return t?(a.back||(a=a.chain()),a.__.key.s[t]&&r.Log("Warning! Key already used!"),n=n||function(){},o=e.text.is(o)?{soul:o}:o||{},o.soul=o.soul||o[e._.soul],o.soul?(a.__.graph[o.soul]||(((a.__.graph[o.soul]={})._={})[e._.soul]=o.soul),(a.__.key.s[t]=a.__.key.s[t]||{})[o.soul]=a.__.graph[o.soul],a.__.flag.end[t]&&a.__.flag.end[t]({soul:o.soul}),i({soul:o.soul})):((a.__.flag.start[t]=a._.at("soul")).once(function(e){r.log("chain.key",t,"\n"),(a.__.key.s[t]=a.__.key.s[t]||{})[e.soul]=a.__.graph[e.soul],delete a.__.flag.start[t]},-1),a._.at("soul").event(i)),a):(n.call(a,{err:e.log("No key!")}),a)},t.all=function(t,e){var n=this.chain();return n},t.path=function(t,n,o){var i=this.chain();return n=n||function(){},o=o||{},(null===t||t)&&e.text.is(t=t.join?t.join("."):t+"")?i.back._.at?(i.back.on(function(a,s){if(s=s||i.__.graph[a.soul]){var u=this||i,c=o.src||i,p={path:t.split(".")},l=e.text.ify(p.path.shift()),h=s[l],f=e.is.soul(h);return r.log("chain.path",l,s,"\n"),l||p.path.length?e.obj.has(s,l)?f?i.get(h,function(t,e){return t?n.call(u,t):void 0}).path(p.path,n,{src:c,step:{soul:a.soul,field:l}}):(n.call(u,null,h,l),c._.at("soul").emit({soul:a.soul,field:l,gun:u,PATH:"SOUL"})):void((o.end||!p.path.length&&i.__.meta(a.soul).end)&&(n.call(u,null,null,l),c._.at("soul").emit({soul:a.soul,field:l,gun:u,PATH:"SOUL"}))):(n.call(u,null,s,l),o.step?c._.at("soul").emit({soul:a.soul,field:null,from:o.step.soul,at:o.step.field,gun:u,PATH:"SOUL"}):c._.at("soul").emit({soul:a.soul,field:null,gun:u,PATH:"SOUL"}))}},{raw:!0,once:!0}),i):(n.call(i,{err:e.log("No context!")}),i):void 0},t.val=function(){return e.on("union").event(function(t,n){e.obj.empty(n,e._.meta)&&((n=t.__.meta(e.is.soul.on(n))).end=(n.end||0)+1)}),function(t,n){var r=this,i={};return t=t||function(t,e){o.console.log(e+":",t)},n=n||{},r.on(function(n,o,a){var s=r.__.graph[n.soul];if(n.key&&(s=e.union.pseudo(n.key,r.__.key.s[n.key])||s),n.field){if(i[n.soul+n.field])return;return i[n.soul+n.field]=!0,t.call(n.gun||r,s[n.field],n.field||n.at)}i[n.soul]||n.key&&i[n.key]||!r.__.meta(n.soul).end||(i[n.soul]=i[n.key]=!0,t.call(n.gun||r,e.obj.copy(s),n.field||n.at))},{raw:!0}),r}}(),t.on=function(t,n){var o=this,r={};return n=e.obj.is(n)?n:{change:n},t=t||function(){},o._.at("soul").event(function(i){r[i.soul]?n.raw&&r[i.soul](o.__.graph[i.soul],i):((r[i.soul]=function(a,s){s=s||i;var u,c=o.__.graph[s.soul];return a&&s.soul!=e.is.soul.on(a)?void 0:s.field&&(u=e.is.soul(c[s.field]))?((r[s.soul+s.field]||{off:function(){}}).off(),void(r[s.soul+s.field]=o.__.on(u).event(function(t){r[i.soul](t,{soul:u,field:null,at:i.field})}))):n.raw?t.call(s.gun||o,s,a,this):void((n.end||!e.obj.empty(a,e._.meta))&&(s.key&&(c=e.union.pseudo(i.key,o.__.key.s[i.key])||c),n.change&&(c=a||c),t.call(s.gun||o,e.obj.copy(s.field?c[s.field]:c),s.field||s.at)))})(o.__.graph[i.soul],i),n.once||o.__.on(i.soul).event(r[i.soul]))}),o},t.put=function(t,n,o){var i=this.chain(),a=function(){i.back._.at("soul").emit({soul:e.is.soul.on(t)||e.roulette.call(i),empty:!0,PUT:"SOUL"})},s=e.time.now();return n=n||function(){},o=o||{},i.back.back||(i=i.chain(),a()),i.back.not&&i.back.not(a),i.back._.at("soul").event(function(a){var u=(a.gun||i,{}),c=t,a=e.obj.copy(a);if(r.log("chain.put",t,"\n"),e.is.value(c)){if(a.from&&a.at&&(a.soul=a.from,a.field=a.at),!a.field)return n.call(i,{err:e.log("No field exists for "+typeof c+"!")});if(!i.__.graph[a.soul])return n.call(i,{err:e.log("No node exists to put "+typeof c+" in!")});u.tmp={},u.tmp[u.field=a.field]=c,c=u.tmp}e.obj.is(c)&&(a.field&&!u.field&&(u.tmp={},
u.tmp[u.field=a.field]=c,c=u.tmp),e.ify(c,function(t,n){function o(o,a){r.soul||(r.soul=e.is.soul.on(a)||e.is.soul.on(r.obj)||e.roulette.call(i),t.graph[r.node._[e._.soul]=r.soul]=r.node,n(r,r.soul))}var r;t&&(r=t.at)&&t.at.node&&(r.node._||(r.node._={}),e.is.soul.on(r.node)||(c===r.obj?(t.graph[r.node._[e._.soul]=r.soul=a.soul]=r.node,n(r,r.soul)):a.empty?o():i.back.path(r.path,o,{once:!0,end:!0})),r.node._[e._.HAM]||(r.node._[e._.HAM]={}),r.field&&(r.node._[e._.HAM][r.field]=s))})(function(t,s){return r.log("chain.put PUT <----",s.graph,"\n"),t||s.err?n.call(i,t||s.err):(t=e.union(i,s.graph).err)?n.call(i,t):((a.from=e.is.soul(s.root[a.field]))&&(a.soul=a.from,a.field=null),e.obj.map(s.graph,function(t,n){e.union(i,e.union.pseudo(n))}),i._.at("soul").emit({soul:a.soul,field:a.field,key:a.key,PUT:"SOUL",WAS:"ON"}),void(e.fns.is(u.hook=i.__.opt.hooks.put)?u.hook(s.graph,function(t,e){return t?n.call(i,t):n.call(i,null,e)},o):(r.Log("Warning! You have no persistence layer to save to!"),n.call(i,null))))}))}),i},t.map=function(t,n){var o=this.chain();return n=e.obj.is(n)?n:n?{node:!0}:{},t=t||function(){},o.back.on(function(i){var a=e.is.soul.on(i);r.log("chain.map",i,"\n"),e.obj.map(i,function(r,i){if(e._.meta!=i){var s=e.is.soul(r);if(s)o.get(r).on(function(e,n){t.call(this,e,n||i),o._.at("soul").emit({soul:s,field:null,from:a,at:i,MAP:"SOUL",gun:this})});else{if(n.node)return;t.call(this,r,i),o._.at("soul").emit({soul:a,field:i,MAP:"SOUL"})}}},this||o)},!0),o},t.set=function(t,n,o){var r=this,i=e.time.now();if(n=n||function(){},o=o||{},r.back||(r=r.put({})),r=r.not(function(t){return t?this.put({}).key(t):this.put({})}),!t&&!e.is.value(t))return r;var a={},s="I"+i+"R"+e.text.random(5);return a[s]=t,e.is.value(t)?r.put(a,n):r.put(a,n).path(s)},t.not=function(t){var n=this;return t=t||function(){},n._.at("null").once(function(o){if(!o.soul&&!n.__.key.s[o=(o||{}).key]){var r=function(t){return++s?e.log("Warning! Multiple `not` resumes!"):void t._.at("soul").once(function(t){t.N0T="KICK SOUL",n._.at("soul").emit(t)})},i=n.chain(),a=t.call(i,o,r),s=-1;e.is(a)&&r(a),i._.at("soul").emit({soul:e.roulette.call(i),empty:!0,key:o,N0T:"SOUL",WAS:"ON"})}}),n},t.err=function(t){return this._.err=e.fns.is(t)?t:function(){},this}}(e.chain=e.prototype),function(t){t.waiting=[],t.soonest=1/0,t.sort=e.list.sort("when"),t.set=function(n){if(!(1/0<=(t.soonest=n))){var o=e.time.is();n=o>=n?0:n-o,clearTimeout(t.id),t.id=setTimeout(t.check,n)}},t.check=function(){var n=e.time.is(),o=1/0;t.waiting.sort(t.sort),t.waiting=e.list.map(t.waiting,function(t,r,i){t&&(t.when<=n?e.fns.is(t.event)&&setTimeout(function(){t.event()},0):(o=o<t.when?o:t.when,i(t)))})||[],t.set(o)},e.schedule=function(e,n){t.waiting.push({when:e,event:n||function(){}}),t.soonest<e||t.set(e)}}({}),e.ify=function(t){function n(t,n,a){a=a||{},n=n||function(t,n){n(t.at,e.roulette())};var s=function(t){return u.end=t||function(){},u.err?(u.end(u.err,u),u.end=function(){}):void r(u)},u={};if(!t)return u.err=e.log("Serializer does not have correct parameters."),s;for(u.at={},u.root={},u.graph={},u.queue=[],u.seen=[],u.loop=!0,u.at.path=[],u.at.obj=t,u.at.node=u.root;u.loop&&!u.err;)i(u,u.at),o(u,n),u.queue.length?u.at=u.queue.shift():u.loop=!1;return s}function o(t,n){var o,a=function(n,o){n.soul=n.soul||o,e.list.map(n.back,function(t){t[e._.soul]=n.soul}),r(t)};e.obj.map(t.at.obj,function(r,s){if(t.at.val=r,t.at.field=s,o=n(t,a)||!0,s===e._.meta)return void(t.at.node[s]=e.obj.copy(r));if(e.is.value(r))t.at.node[s]=e.obj.copy(r);else{var u,c={obj:r,node:{},back:[],path:[s]},p={};if(c.path=(t.at.path||[]).concat(c.path||[]),!e.obj.is(r))return t.err={err:e.log("Invalid value at "+c.path.join(".")+"!")};(u=i(t,c))?(p[e._.soul]=e.is.soul.on(u.node)||null,(u.back=u.back||[]).push(t.at.node[s]=p)):(t.queue.push(c),p[e._.soul]=null,c.back.push(t.at.node[s]=p))}}),o||n(t,a)}function r(t){return t.err||!e.list.map(t.seen,function(t){return t.soul?void 0:!0})&&!t.loop?(t.end(t.err,t),t.end=function(){}):void 0}function i(t,n){return e.list.map(t.seen,function(t){return n.obj===t.obj?t:void 0})||t.seen.push(n)&&!1}return n}({}),"undefined"!=typeof window?window.Gun=e:t.exports=e;var o=this||{};o.console=o.console||{log:function(t){return t}};var r={log:e.log=function(t){return e.log.verbose&&o.console.log.apply(o.console,arguments),t},Log:function(t){return!e.log.squelch&&o.console.log.apply(o.console,arguments),t}}}({}),function(t){if(this.Gun){if(!window.JSON)throw new Error("Include JSON first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js");Gun.on("opt").event(function(t,o){o=o||{};var r=t.__.tab=t.__.tab||{};r.headers=o.headers||{},r.headers["gun-sid"]=r.headers["gun-sid"]||Gun.text.random(),r.prefix=r.prefix||o.prefix||"gun/",r.prekey=r.prekey||o.prekey||"",r.prenode=r.prenode||o.prenode||"_/nodes/",window.tab=r,window.store=e,r.get=r.get||function(o,i,a){o&&(i=i||function(){},i.GET=!0,(a=a||{}).url=a.url||{},a.headers=Gun.obj.copy(r.headers),Gun.is.soul(o)?a.url.query=o:a.url.pathname="/"+o,Gun.log("tab get --->",o),function s(t,n){var o,i,a=(a=Gun.is.soul(t))?r.prefix+r.prenode+a:r.prefix+r.prekey+t,u=e.get(a);return Gun.is.node(u)?((n.graph=n.graph||{})[i=Gun.is.soul.on(u)]=(o={})[i]=n.node=u,n(null,o),(o={})[i]=Gun.union.pseudo(i),n(null,o)):void(Gun.obj.is(u)&&(Gun.obj.map(u,function(t){Gun.is.soul(t)&&s(t,n)}),n(null,{})))}(o,i),(i.local=a.local)||Gun.obj.map(a.peers||t.__.opt.peers,function(t,e){var s={};n(e,null,r.error(i,"Error: Get failed through "+e,function(t){s.graph||Gun.obj.empty(i.graph)||r.put(s.graph=i.graph,function(t,e){Gun.log("Stateless handshake sync:",t,e)},{peers:r.peers(e)}),Gun.is.graph(t.body,function(t,e){Gun.is.soul(o)||r.key(o,e,function(){},{local:!0})}),setTimeout(function(){r.put(t.body,function(){},{local:!0})},1)}),a),i.peers=!0}),r.peers(i))},r.put=r.put||function(o,i,a){i=i||function(){},a=a||{},Gun.is.graph(o,function(n,o){a.local||t.__.on(o).emit(n),t.__.graph[o]&&e.put(r.prefix+r.prenode+o,t.__.graph[o])}),(i.local=a.local)||Gun.obj.map(a.peers||t.__.opt.peers,function(t,e){n(e,o,r.error(i,"Error: Put failed on "+e),{headers:r.headers}),i.peers=!0}),r.peers(i)},r.key=r.key||function(o,i,a,s){var u={};return s=s||{},a=a||function(){},u[Gun._.soul]=i=Gun.is.soul(i)||i,i?(function(t){(t=e.get(r.prefix+r.prekey+o)||{})[i]=u,e.put(r.prefix+r.prekey+o,t)}(),(a.local=s.local||s.soul)||Gun.obj.map(s.peers||t.__.opt.peers,function(t,e){n(e,u,r.error(a,"Error: Key failed to be made on "+e),{url:{pathname:"/"+o},headers:r.headers}),a.peers=!0}),void r.peers(a)):a({err:Gun.log("No soul!")})},r.error=function(t,e,n){return function(o,r){return r.body=r.body||r.chunk||r.end||r.write,o||!r||(o=r.body&&r.body.err)?t({err:Gun.log(o||e)}):(n&&n(r),void t(null,r.body))}},r.peers=function(t,e){return Gun.text.is(t)?((e={})[t]={},e):void(t&&!t.peers&&setTimeout(function(){t.local||console.log("Warning! You have no peers to connect to!"),t.graph||t.node||t()},1))},r.server=r.server||function(t,e){return t&&e&&t.url&&t.method?(t.url=t.url.href?t.url:document.createElement("a"),t.url.href=t.url.href||t.url,t.url.key=(t.url.pathname||"").replace(r.server.regex,"").replace(/^\//i,"")||"",t.method=t.body?"put":"get","get"==t.method?r.server.get(t,e):"put"==t.method||"post"==t.method?r.server.put(t,e):void 0):void 0},r.server.json="application/json",r.server.regex=t.__.opt.route=t.__.opt.route||o.route||/^\/gun/i,r.server.get=function(){},r.server.put=function(e,n){var o={headers:{"Content-Type":r.server.json}};return e.body?void(r.server.put.key(e,n)||(Gun.is.node(e.body)||Gun.is.graph(e.body,function(e,n){t.__.flag.end[n]=!0}))&&(e.err=Gun.union(t,e.body,function(r,i){if(r)return n({headers:o.headers,body:{err:r||"Union failed."}});var i=i||{};i.graph={},Gun.is.graph(e.body,function(e,n){i.graph[n]=t.__.graph[n]}),t.__.opt.hooks.put(i.graph,function(t,e){return t?n({headers:o.headers,body:{err:t||"Failed."}}):void n({headers:o.headers,body:{ok:e||"Persisted."}})},{local:!0})}).err)&&n({headers:o.headers,body:{err:e.err||"Union failed."}})):n({headers:o.headers,body:{err:"No body"}})},r.server.put.key=function(e,n){if(e&&e.url&&e.url.key&&Gun.obj.has(e.body,Gun._.soul)){var o=e.url.key,i=Gun.is.soul(e.body);return t.key(o,function(t,e){return t?n({headers:{"Content-Type":r.server.json},body:{err:t}}):void n({headers:{"Content-Type":r.server.json},body:e})},i),!0}},Gun.obj.map(t.__.opt.peers,function(){return r.request=r.request||n.createServer(r.server)||!0}),t.__.opt.hooks.get=t.__.opt.hooks.get||r.get,t.__.opt.hooks.put=t.__.opt.hooks.put||r.put,t.__.opt.hooks.key=t.__.opt.hooks.key||r.key});var e=function(){function t(){}var e=window.localStorage||{setItem:function(){},removeItem:function(){},getItem:function(){}};return t.put=function(t,n){return e.setItem(t,Gun.text.ify(n))},t.get=function(t){return Gun.obj.ify(e.getItem(t)||null)},t.del=function(t){return e.removeItem(t)},t}(),n=function(){function t(e,n,o,r){r=r||(e.length?{base:e}:e),r.base=r.base||e,r.body=r.body||n,r.base&&t.transport(r,o)}return t.createServer=function(e){t.createServer.s.push(e)},t.createServer.ing=function(e,n){for(var o=t.createServer.s.length;o--;)(t.createServer.s[o]||function(){})(e,n)},t.createServer.s=[],t.transport=function(e,n){t.ws(e,n)||t.jsonp(e,n)},t.ws=function(e,n){var o,r=window.WebSocket||window.mozWebSocket||window.webkitWebSocket;if(r){if(o=t.ws.peers[e.base]){if(!o.readyState)return setTimeout(function(){t.ws(e,n)},10),!0;var i={};return e.headers&&(i.headers=e.headers),e.body&&(i.body=e.body),e.url&&(i.url=e.url),i.headers=i.headers||{},t.ws.cbs[i.headers["ws-rid"]="WS"+ +new Date+"."+Math.floor(65535*Math.random()+1)]=function(e,o){(o.body||o.end)&&delete t.ws.cbs[i.headers["ws-rid"]],n(e,o)},o.send(JSON.stringify(i)),!0}if(o!==!1)return o=t.ws.peers[e.base]=new r(e.base.replace("http","ws")),o.onopen=function(o){t.ws(e,n)},o.onclose=window.onbeforeunload=function(r){if(r){if(o&&o.close instanceof Function&&o.close(),1006===r.code)return o=t.ws.peers[e.base]=!1,void t.transport(e,n);o=t.ws.peers[e.base]=null,setTimeout(function(){console.log("!!!!! WEBSOCKET DICONNECTED !!!!!! ATTEMPTING INFINITE RETRY WITH NO BACKOFF !!!!!!!"),t.ws(e,function(){})},50)}},o.onmessage=function(e){if(e&&e.data){var n;try{n=JSON.parse(e.data)}catch(o){return}if(n){if(n.headers=n.headers||{},n.headers["ws-rid"])return(t.ws.cbs[n.headers["ws-rid"]]||function(){})(null,n);Gun.log("We have a pushed message!",n),n.body&&t.createServer.ing(n,function(){})}}},o.onerror=function(t){console.log("!!!! WEBSOCKET ERROR !!!!",t),Gun.log(t)},!0}},t.ws.peers={},t.ws.cbs={},t.jsonp=function(e,n){t.jsonp.ify(e,function(o){o&&t.jsonp.send(o,function(o){n(null,o),t.jsonp.poll(e,o)},e.jsonp)})},t.jsonp.send=function(t,e,n){var o=document.createElement("script");return o.src=t,window[o.id=n]=function(t){e(t),e.id=o.id,o.parentNode.removeChild(o),window[e.id]=null;try{delete window[e.id]}catch(n){}},o.async=!0,document.getElementsByTagName("head")[0].appendChild(o),o},t.jsonp.poll=function(e,n){e&&e.base&&n&&n.headers&&n.headers.poll&&((t.jsonp.poll.s=t.jsonp.poll.s||{})[e.base]=t.jsonp.poll.s[e.base]||setTimeout(function(){var n={base:e.base,headers:{pull:1}};t.each(e.headers,function(t,e){n.headers[e]=t}),t.jsonp(n,function(n,o){for(delete t.jsonp.poll.s[e.base];o.body&&o.body.length&&o.body.shift;){var r=o.body.shift();r&&r.body&&t.createServer.ing(r,function(){})}})},n.headers.poll))},t.jsonp.ify=function(e,n){var o=encodeURIComponent,r="?";if(e.url&&e.url.pathname&&(r=e.url.pathname+r),r=e.base+r,t.each((e.url||{}).query,function(t,e){r+=o(e)+"="+o(t)+"&"}),e.headers&&(r+=o("`")+"="+o(JSON.stringify(e.headers))+"&"),t.jsonp.max<r.length)return n();if(r+=o("jsonp")+"="+o(e.jsonp="P"+Math.floor(65535*Math.random()+1)),e.body){r+="&";var i=e.body,a=function(t,e,n){return o("%")+"="+o(t+"-"+(e||t)+"/"+(n||t))+"&"+o("$")+"="};"string"!=typeof i&&(i=JSON.stringify(i),r+=o("^")+"="+o("json")+"&"),i=o(i);var s=0,u=i.length,c=t.jsonp.max-(r.length+a(u.toString()).length);if(0>c)return n();for(;i;)n(r+a(s,s+=c,u)+i.slice(0,s)),i=i.slice(s)}else n(r)},t.jsonp.max=2e3,t.each=function(t,e){if(t&&e)for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},t}()}}({})},function(t,e,n){!function(){function t(t,e,n){return o.runAnimation(t,e,n)}var o=n(7),r=[[0,60],[4.7,33.018],[9.41,6.992],[14.11,-8.455],[18.72,-12.727],[24.32,-9.033],[29.93,-2.855],[35.54,1.234],[41.04,2.351],[52.15,.527],[63.26,-.434],[85.49,0],[100,0]],i={},a={};r.reduce(function(t,e){return i[""+e[0]+"%"]=[0,e[1]],a[""+e[0]+"%"]=[0,-e[1]],t+1},0),o.registerAnimation({name:"bounce-up-1",animation:i,presets:{duration:1e3,easing:"linear"}}),o.registerAnimation({name:"bounce-up-2",animation:i,presets:{duration:1e3,easing:"linear"}}),o.registerAnimation({name:"bounce-down-1",animation:a,presets:{duration:1e3,easing:"linear"}}),o.registerAnimation({name:"bounce-down-2",animation:a,presets:{duration:1e3,easing:"linear"}});var s=[0,40,50,60,80,100],u=[[{opacity:0,translate:[3,8]}],[{opacity:.3,translate:[6,-20]}],[{opacity:.4,translate:[4,-30]}],[{opacity:.3,translate:[2,-40]}],[{opacity:.1,translate:[5,-50]}],[{opacity:0,translate:[8,-70]}]],c=[[{opacity:0,translate:[-2,6]}],[{opacity:.2,translate:[-3,-20]}],[{opacity:.3,translate:[-6,-30]}],[{opacity:.2,translate:[-5,-40]}],[{translate:[-3,-50]}],[{opacity:0,translate:[-4,-80]}]],p=[[{opacity:0,translate:[3,4]}],[{opacity:.2,translate:[8,-30]}],[{opacity:.35,translate:[11,-40]}],[{opacity:.2,translate:[9,-50]}],[{translate:[7,-60]}],[{opacity:0,translate:[5,-80]}]],l={},h={},f={};s.reduce(function(t,e){return l[""+e]=u[t][0],h[""+e]=c[t][0],f[""+e]=p[t][0],t+1},0),o.registerAnimation({name:"fly-1",animation:l,presets:{duration:2500,easing:"linear"}}),o.registerAnimation({name:"fly-2",animation:h,presets:{duration:1800,easing:"linear"}}),o.registerAnimation({name:"fly-3",animation:f,presets:{duration:3300,easing:"linear"}}),e.play=t}()},function(t,e,n){!function(){function t(t){return t?t.toArray?t.toArray():t:[]}n(34),n(45),n(44),n(33);var e=n(30).play,o=n(32),r=o.ENTER_KEY,i=o.ITEM_HEIGHT;Todos=new TodoModel("todo/data");var a=window.requestAnimationFrame||setTimeout,s=function(t){return t?a(function(){return a(t)}):void 0},u=10,c=0;Imba.extendTag("htmlelement",function(t){t.prototype.bounce=function(t){return this._bounce&&this._bounce!="bounce-"+t+"-2"?this._bounce="bounce-"+t+"-2":this._bounce="bounce-"+t+"-1",e(this._dom,this._bounce),this},t.prototype.setMoveTo=function(t){var e=this;return s(function(){return 0==e._dom.style.opacity?e._dom.style.opacity=1:void 0}),e._dom.style.top==""+t+"px"?e:(~~t<~~e._y&&e.bounce("up"),(!e._y||~~t>~~e._y)&&e.bounce("down"),e._dom.style.top=""+t+"px",e._y=t,e)}}),Imba.defineTag("heart","div",function(t){var n=["ðŸ’œ","ðŸ’š","ðŸ’›","ðŸ’™"];t.prototype.render=function(){return this.flag("heart").setChildren(""+this._heart).synced()},t.prototype.build=function(){var t=this;return t._heart=n[Math.floor(Math.random()*n.length)],t._fly="fly-"+(Math.floor(3*Math.random())+1),t._dom.style.fontSize=Math.floor(6*Math.random())+15+"px",e(t._dom,t._fly,function(){return t.orphanize(),c--}),c++,t.render(),t}}),Imba.defineTag("app",function(e){e.prototype.hash=function(){return this._hash},e.prototype.model=function(){return this._model},e.prototype.build=function(){var t=this;return t._model=Todos,t._model.subscribe(function(){return u>c&&q$$("#heartbox").append(t$("heart").end()),t.render()}),t._model.load(),window.addEventListener("hashchange",function(){return t._hash=window.location.hash,t.render()}),t._hash=window.location.hash,t.render(),t},e.prototype.onkeydown=function(t){var e,n;return t.which()==r&&(e=t.target().value().trim())?(this.model().addTodo(e),t.target().setValue(n=""),n):void 0},e.prototype.toggleAll=function(t){return this.model().toggleAll(t.target().checked())},e.prototype.clearCompleted=function(){return q$$(".toggle-all",this).setChecked(!1),this.model().clearCompleted()},e.prototype.list=function(e){for(var n,o=0,r=t(e),a=r.length,s=[];a>o;o++)n=r[o],s.push((this["_"+n.id]=this["_"+n.id]||t$("todo")).setMoveTo(""+o*i).setObject(n).end());return s},e.prototype.render=function(){for(var e,n,o,r,a=Todos.sorted(),s=a.length,u=[],c=[],p=0,l=t(a),h=l.length;h>p;p++)r=l[p],r.completed?u.push(r):c.push(r);var f={"#/completed":u,"#/active":c}[this._hash]||a;return this.setChildren(Imba["static"]([(e=this.$a||(this.$a=t$("header").flag("header"))).setContent(Imba["static"]([(e.$$a=e.$$a||t$("h1")).setText("todos").end(),(e.$$b=e.$$b||ti$("p","heartbox")).end(),(e.$$c=e.$$c||t$("input").flag("new-todo").setType("text").setPlaceholder("What to do?")).end()],1)).end(),s&&(e=this.$b||(this.$b=t$("section").flag("main"))).setContent(Imba["static"]([(e.$$a=e.$$a||t$("input").flag("toggle-all").setType("checkbox").setHandler("change","toggleAll",this)).setChecked(u.length==s).end(),(e.$$b=e.$$b||t$("ul").flag("todo-list")).setContent(this.list(f)).end()],1)).end(),s&&(e=this.$c||(this.$c=t$("footer").flag("footer"))).setMoveTo(""+f.length*i).setContent(Imba["static"]([(n=e.$$a||(e.$$a=t$("span").flag("todo-count"))).setContent(Imba["static"]([(n.$$a=n.$$a||t$("strong")).setContent(""+c.length+" ").end(),1==c.length?"item left":"items left"],1)).end(),(n=e.$$b||(e.$$b=t$("ul").flag("filters"))).setContent(Imba["static"]([(o=n.$$a||(n.$$a=t$("li"))).setContent((o.$$a=o.$$a||t$("a").setHref("#/")).flag("selected",f==a).setText("All").end()).end(),(o=n.$$b||(n.$$b=t$("li"))).setContent((o.$$a=o.$$a||t$("a").setHref("#/active")).flag("selected",f==c).setText("Active").end()).end(),(o=n.$$c||(n.$$c=t$("li"))).setContent((o.$$a=o.$$a||t$("a").setHref("#/completed")).flag("selected",f==u).setText("Completed").end()).end()],1)).end(),u.length&&(e.$$c=e.$$c||t$("button").flag("clear-completed").setHandler("tap","clearCompleted",this)).setText("Clear completed").end()],1)).end()],1)).synced()}});var p=ti$("app","app").end();q$$("body").append(p)}()},function(t,e){!function(){var e,n,o;t.exports.ESCAPE_KEY=e=27,t.exports.ENTER_KEY=n=13,t.exports.ITEM_HEIGHT=o=60,Imba.defineTag("todo","li",function(t){t.prototype.model=function(){return this.up(q$("._app",this)).model()},t.prototype.commit=function(){return this._hash!=this.hash(this._object)&&(this._hash=this.hash(this._object),this.render()),this},t.prototype.hash=function(t){return""+t.id+t.title+t.completed+this._editing},t.prototype.render=function(){var t,e=this._object;return this.flag("completed",e.completed).setChildren(Imba["static"]([(t=this.$a||(this.$a=t$("div").flag("view"))).setContent(Imba["static"]([(t.$$a=t.$$a||t$("label").setHandler("dblclick","edit",this)).setContent(""+e.title).end(),(this._toggle=this._toggle||t$("input").setRef("toggle",this).setType("checkbox").setHandler("change","toggle",this)).setChecked(e.completed).end(),(t.$$c=t.$$c||t$("button").flag("destroy").setHandler("tap","drop",this)).end()],1)).end(),(this._input=this._input||t$("input").setRef("input",this).flag("edit").setType("text")).end()],1)).synced()},t.prototype.edit=function(){var t=this;return this._editing=!0,this.flag("editing"),this._input.setValue(this._object.title),setTimeout(function(){return t._input.focus()},10),t.render()},t.prototype.drop=function(){return this.model().destroy(this.object())},t.prototype.toggle=function(t){return this.model().toggle(this._object)},t.prototype.submit=function(){this._editing=!1,this.unflag("editing");var t=this._input.value().trim();return this._object.title!=t?(this._object.title=t,t?this.model().rename(this.object(),t):this.model().destroy(this.object()),this.render()):void 0},t.prototype.onfocusout=function(t){return this._editing?this.submit():void 0},t.prototype.cancel=function(){return this._editing=!1,this.unflag("editing"),this._input.blur(),this.render()},t.prototype.onkeydown=function(t){return t.halt(),t.which()==n&&this.submit(),t.which()==e?this.cancel():void 0}})}()},function(t,e,n){(function(t){!function(){function e(t){return t?t.toArray?t.toArray():t:[]}function o(t){this._listeners=[],this._key=t}n(29);var r=100;t.TodoModel=o,o.prototype.__items={"default":[],name:"items"},o.prototype.items=function(t){return this._items},o.prototype.setItems=function(t){return this._items=t,this},o.prototype._items=[],o.prototype.subscribe=function(t){return this._listeners.push(t),this},o.prototype.sorted=function(){return this.items().sort(function(t,e){var t=t.id.slice(1,20),e=e.id.slice(1,20);return e>t?1:t>e?-1:0})},o.prototype.notify=function(){for(var t=0,n=e(this._listeners),o=n.length,r=[];o>t;t++)r.push(n[t]());return r},o.prototype.inform=function(){var t=this;return t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){return t.notify()},r),t},o.prototype.put=function(t,e,n){if(t){var o=e?{title:e.title||"<untitled>",completed:e.completed||!1}:null;return this._gun.path(t).put(o,n),this}},o.prototype.uid=function(){return"I"+Gun.time.now()+"R"+Gun.text.random(5)},o.prototype.addTodo=function(t){return this.put(this.uid(),{title:t,completed:!1})},o.prototype.toggleAll=function(t){for(var n=0,o=e(this.items()),r=o.length,i=[];r>n;n++)i.push(this.setCompleted(o[n],t));return i},o.prototype.setCompleted=function(t,e){return void 0===e&&(e=!0),this.put(t.id,{title:t.title,completed:e})},o.prototype.toggle=function(t){return this.put(t.id,{title:t.title,completed:!t.completed})},o.prototype.destroy=function(t){return this.put(t.id,null)},o.prototype.save=function(t){return this.put(t.id,t)},o.prototype.rename=function(t,e){return this.put(t.id,{title:e,completed:t.completed})},o.prototype.clearCompleted=function(){var t=this;return t.items().map(function(e){return e.completed?t.destroy(e):void 0}),t},o.prototype.load=function(){var t=this;return t._gun=Gun(window.location.origin+"/gun").get(t._key).not(function(){var e;return this.put((e={},e[""+t.uid()]={title:"Digg it...ðŸ˜‹ðŸ˜‹ðŸ˜‹ðŸ˜‹ðŸ˜‹ðŸ˜œðŸ˜œðŸ˜œðŸ˜œðŸ˜œ",completed:!1},e)).key(t._key)}),t._gun.map(function(n,o){if(o){for(var r,i=0,a=e(t._items),s=a.length;s>i;i++)if(r=a[i],r.id==o)var u=r;if(u&&null==n)return t._items.splice(t._items.indexOf(u),1),t.inform();if(u){if(u.title!=n.title||u.completed!=n.completed)return u.title=n.title||"<untitled>",u.completed=n.completed||!1,t.inform()}else if(n)return t._items.push({id:o,title:n.title,completed:n.completed||!1}),t.inform()}}),t}}()}).call(e,function(){return this}())},function(t,e,n){!function(){"undefined"==typeof Imba&&(n(42),n(35),n(39),n(36),n(38),n(40),n(37),n(41),n(43))}()},function(t,e){!function(){function t(t,e,n){for(var o,r,i;(o=n)&&(n=n.next);)(r=n.listener)&&(i=n.path&&r[n.path]?e?r[n.path].apply(r,e):r[n.path]():e?r.apply(n,e):r.call(n)),n.times&&--n.times<=0&&(o.next=n.next,n.listener=null)}Imba.listen=function(t,e,n,o){var r,i,a,s;return i=t.__listeners__||(t.__listeners__={}),a=i[r=e]||(i[r]={}),s=a.tail||(a.tail=a.next={}),s.listener=n,s.path=o,a.tail=s.next={},s},Imba.once=function(t,e,n){var o=Imba.listen(t,e,n);return o.times=1,o},Imba.unlisten=function(t,e,n,o){var r,i,a=t.__listeners__;if(a&&(r=a[e]))for(;(i=r)&&(r=r.next);)if(r==n||r.listener==n){i.next=r.next,r.listener=null;break}},Imba.emit=function(e,n,o){var r;(r=e.__listeners__)&&(r[n]&&t(n,o,r[n]),r.all&&t(n,[n,o],r.all))},Imba.observeProperty=function(t,e,n,o,r){return r&&"object"==typeof r&&Imba.unlisten(r,"all",t,n),o&&"object"==typeof o&&Imba.listen(o,"all",t,n),this}}()},function(t,e){!function(){function t(t){return t?t.toArray?t.toArray():t:[]}var e=window.getComputedStyle(document.documentElement,"");Imba.CSSKeyMap={};for(var n,o=0,r=t(e),i=r.length;i>o;o++){n=r[o];var a=n.replace(/^-(webkit|ms|moz|o|blink)-/,""),s=a.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});n!=a&&e.hasOwnProperty(a)||(Imba.CSSKeyMap[a]=Imba.CSSKeyMap[s]=n)}Imba.extendTag("htmlelement",function(t){t.prototype.css=function(t,e){if(t instanceof Object){for(var n=0,o=Object.keys(t),r=o.length;r>n;n++)this.css(o[n],t[o[n]]);return this}if(t=Imba.CSSKeyMap[t]||t,null==e)this.dom().style.removeProperty(t);else{if(void 0==e)return this.dom().style[t];("number"==typeof e||e instanceof Number)&&t.match(/width|height|left|right|top|bottom/)&&(e+="px"),this.dom().style[t]=e}return this}})}()},function(t,e){!function(){function t(t){return t?t.toArray?t.toArray():t:[]}var e=(document,window),n=window&&void 0!==window.ontouchstart;Imba.RingBuffer=function(t){void 0===t&&(t=10),this._array=[],this._keep=t,this._head=0},Imba.RingBuffer.prototype.__head={name:"head"},Imba.RingBuffer.prototype.head=function(t){return this._head},Imba.RingBuffer.prototype.setHead=function(t){return this._head=t,this},Imba.RingBuffer.prototype.push=function(t){var e=this._head++;return this._array[e%this._keep]=t,e},Imba.RingBuffer.prototype.last=function(){return this._array[this._head%this._keep]},Imba.Pointer=function(){this.setButton(-1),this.setEvents(new Imba.RingBuffer(10)),this.setEvent({x:0,y:0,type:"uninitialized"})},Imba.Pointer.prototype.__phase={name:"phase"},Imba.Pointer.prototype.phase=function(t){return this._phase},Imba.Pointer.prototype.setPhase=function(t){return this._phase=t,this},Imba.Pointer.prototype.__prevEvent={name:"prevEvent"},Imba.Pointer.prototype.prevEvent=function(t){return this._prevEvent},Imba.Pointer.prototype.setPrevEvent=function(t){return this._prevEvent=t,this},Imba.Pointer.prototype.__button={name:"button"},Imba.Pointer.prototype.button=function(t){return this._button},Imba.Pointer.prototype.setButton=function(t){return this._button=t,this},Imba.Pointer.prototype.__event={name:"event"},Imba.Pointer.prototype.event=function(t){return this._event},Imba.Pointer.prototype.setEvent=function(t){return this._event=t,this},Imba.Pointer.prototype.__dirty={name:"dirty"},Imba.Pointer.prototype.dirty=function(t){return this._dirty},Imba.Pointer.prototype.setDirty=function(t){return this._dirty=t,this},Imba.Pointer.prototype.__events={name:"events"},Imba.Pointer.prototype.events=function(t){return this._events},Imba.Pointer.prototype.setEvents=function(t){return this._events=t,this},Imba.Pointer.prototype.__touch={name:"touch"},Imba.Pointer.prototype.touch=function(t){return this._touch},Imba.Pointer.prototype.setTouch=function(t){return this._touch=t,this},Imba.Pointer.prototype.update=function(t){return this.setEvent(t),this.events().push(t),this.setDirty(!0),this},Imba.Pointer.prototype.process=function(){var t=(this.phase(),this.prevEvent(),this.event());return this.dirty()?(this.setPrevEvent(t),this.setDirty(!1),"mousedown"==t.type?(this.setButton(t.button),this.setTouch(new Imba.Touch(t,this)),this.touch().mousedown(t,t)):"mousemove"==t.type?this.touch()&&this.touch().mousemove(t,t):"mouseup"==t.type&&(this.setButton(-1),this.touch()&&this.touch().mouseup(t,t),this.setTouch(null))):this.touch()&&this.touch().idle(),this},Imba.Pointer.prototype.emit=function(t,e,n){return n&&n.constructor===Object||(n={}),void 0!==n.bubble?n.bubble:!0,!0},Imba.Pointer.prototype.cleanup=function(){return Imba.POINTERS},Imba.Pointer.prototype.x=function(){return this.event().x},Imba.Pointer.prototype.y=function(){return this.event().y},Imba.Pointer.update=function(){for(var n=0,o=t(Imba.POINTERS),r=o.length;r>n;n++)o[n].process();return e.requestAnimationFrame(Imba.Pointer.update),this},Imba.Touch=function(t,e){this.setEvent(t),this.setData({}),this.setActive(!0),this._suppress=!1,this.setBubble(!1),this.setPointer(e),this.setUpdates(0)};var o=[],r=0,i={};Imba.Touch.count=function(){return r},Imba.Touch.lookup=function(t){return t&&(t.__touch__||i[t.identifier])},Imba.Touch.release=function(t,e){var n,o;n=i[t.identifier],delete i[t.identifier],o=t.__touch__,delete t.__touch__,o},Imba.Touch.ontouchstart=function(e){for(var n,a=0,s=t(e.changedTouches),u=s.length;u>a;a++)if(n=s[a],!this.lookup(n)){var c=i[n.identifier]=new this(e);n.__touch__=c,o.push(c),r++,c.touchstart(e,n)}return this},Imba.Touch.ontouchmove=function(e){for(var n,o,r=0,i=t(e.changedTouches),a=i.length;a>r;r++)o=i[r],(n=this.lookup(o))&&n.touchmove(e,o);return this},Imba.Touch.ontouchend=function(e){for(var n,o,i=0,a=t(e.changedTouches),s=a.length;s>i;i++)o=a[i],(n=this.lookup(o))&&(n.touchend(e,o),this.release(o,n),r--);return this},Imba.Touch.ontouchcancel=function(e){for(var n,o,i=0,a=t(e.changedTouches),s=a.length;s>i;i++)o=a[i],(n=this.lookup(o))&&(n.touchcancel(e,o),this.release(o,n),r--);return this},Imba.Touch.prototype.__phase={name:"phase"},Imba.Touch.prototype.phase=function(t){return this._phase},Imba.Touch.prototype.setPhase=function(t){return this._phase=t,this},Imba.Touch.prototype.__active={name:"active"},Imba.Touch.prototype.active=function(t){return this._active},Imba.Touch.prototype.setActive=function(t){return this._active=t,this},Imba.Touch.prototype.__event={name:"event"},Imba.Touch.prototype.event=function(t){return this._event},Imba.Touch.prototype.setEvent=function(t){return this._event=t,this},Imba.Touch.prototype.__pointer={name:"pointer"},Imba.Touch.prototype.pointer=function(t){return this._pointer},Imba.Touch.prototype.setPointer=function(t){return this._pointer=t,this},Imba.Touch.prototype.__target={name:"target"},Imba.Touch.prototype.target=function(t){return this._target},Imba.Touch.prototype.setTarget=function(t){return this._target=t,this},Imba.Touch.prototype.__handler={name:"handler"},Imba.Touch.prototype.handler=function(t){return this._handler},Imba.Touch.prototype.setHandler=function(t){return this._handler=t,this},Imba.Touch.prototype.__updates={name:"updates"},Imba.Touch.prototype.updates=function(t){return this._updates},Imba.Touch.prototype.setUpdates=function(t){return this._updates=t,this},Imba.Touch.prototype.__suppress={name:"suppress"},Imba.Touch.prototype.suppress=function(t){return this._suppress},Imba.Touch.prototype.setSuppress=function(t){return this._suppress=t,this},Imba.Touch.prototype.__data={name:"data"},Imba.Touch.prototype.data=function(t){return this._data},Imba.Touch.prototype.setData=function(t){return this._data=t,this},Imba.Touch.prototype.__bubble={chainable:!0,name:"bubble"},Imba.Touch.prototype.bubble=function(t){return void 0!==t?(this.setBubble(t),this):this._bubble},Imba.Touch.prototype.setBubble=function(t){return this._bubble=t,this},Imba.Touch.prototype.__gestures={name:"gestures"},Imba.Touch.prototype.gestures=function(t){return this._gestures},Imba.Touch.prototype.setGestures=function(t){return this._gestures=t,this},Imba.Touch.prototype.__x0={name:"x0"},Imba.Touch.prototype.x0=function(t){return this._x0},Imba.Touch.prototype.setX0=function(t){return this._x0=t,this},Imba.Touch.prototype.__y0={name:"y0"},Imba.Touch.prototype.y0=function(t){return this._y0},Imba.Touch.prototype.setY0=function(t){return this._y0=t,this},Imba.Touch.prototype.preventDefault=function(){return this._preventDefault=!0,this.event()&&this.event().preventDefault(),this},Imba.Touch.prototype.extend=function(t){return this._gestures||(this._gestures=[]),this._gestures.push(t),this},Imba.Touch.prototype.redirect=function(t){return this._redirect=t,this},Imba.Touch.prototype.suppress=function(){return this._active=!1,this},Imba.Touch.prototype.touchstart=function(t,e){return this._event=t,this._touch=e,this._x=e.clientX,this._y=e.clientY,this.began(),t&&this._suppress&&t.preventDefault(),this},Imba.Touch.prototype.touchmove=function(t,e){return this._event=t,this._x=e.clientX,this._y=e.clientY,this.update(),t&&this._suppress&&t.preventDefault(),this},Imba.Touch.prototype.touchend=function(t,e){return this._event=t,this._x=e.clientX,this._y=e.clientY,this.ended(),t&&this._suppress&&t.preventDefault(),this},Imba.Touch.prototype.touchcancel=function(t,e){return this},Imba.Touch.prototype.mousedown=function(t,e){return this._x=e.clientX,this._y=e.clientY,this.began(),this},Imba.Touch.prototype.mousemove=function(t,e){return this._x=e.clientX,this._y=e.clientY,this._event=t,this._suppress&&t.preventDefault(),this.update(),this.move(),this},Imba.Touch.prototype.mouseup=function(t,e){return this._x=e.clientX,this._y=e.clientY,this.ended(),this},Imba.Touch.prototype.idle=function(){return this.update()},Imba.Touch.prototype.began=function(){
this._x0=this._x,this._y0=this._y;var t=(this.event(),this.event().target),e=null;for(this._sourceTarget=t&&tag$wrap(t);t&&(e=tag$wrap(t),!e||!e.ontouchstart||(this._bubble=!1,this.setTarget(e),this.target().ontouchstart(this),this._bubble));)t=t.parentNode;return this._updates++,this},Imba.Touch.prototype.update=function(){if(!this._active)return this;if(this._redirect&&(this._target&&this._target.ontouchcancel&&this._target.ontouchcancel(this),this.setTarget(this._redirect),this._redirect=null,this.target().ontouchstart&&this.target().ontouchstart(this)),this._updates++,this._gestures)for(var e=0,n=t(this._gestures),o=n.length;o>e;e++)n[e].ontouchupdate(this);return this.target()&&this.target().ontouchupdate&&this.target().ontouchupdate(this),this},Imba.Touch.prototype.move=function(){if(!this._active)return this;if(this._gestures)for(var e,n=0,o=t(this._gestures),r=o.length;r>n;n++)e=o[n],e.ontouchmove&&e.ontouchmove(this,this._event);return this.target()&&this.target().ontouchmove&&this.target().ontouchmove(this,this._event),this},Imba.Touch.prototype.ended=function(){if(!this._active)return this;if(this._updates++,this._gestures)for(var e=0,n=t(this._gestures),o=n.length;o>e;e++)n[e].ontouchend(this);return this.target()&&this.target().ontouchend&&this.target().ontouchend(this),this._touch&&ED.trigger("tap",this.event().target),this},Imba.Touch.prototype.cancelled=function(){return this},Imba.Touch.prototype.dx=function(){return this._x-this._x0},Imba.Touch.prototype.dy=function(){return this._y-this._y0},Imba.Touch.prototype.x=function(){return this._x},Imba.Touch.prototype.y=function(){return this._y},Imba.Touch.prototype.button=function(){return this._pointer?this._pointer.button():0},Imba.Touch.prototype.sourceTarget=function(){return this._sourceTarget},Imba.TouchGesture=function(){},Imba.TouchGesture.prototype.__active={"default":!1,name:"active"},Imba.TouchGesture.prototype.active=function(t){return this._active},Imba.TouchGesture.prototype.setActive=function(t){return this._active=t,this},Imba.TouchGesture.prototype._active=!1,Imba.TouchGesture.prototype.ontouchstart=function(t){return this},Imba.TouchGesture.prototype.ontouchupdate=function(t){return this},Imba.TouchGesture.prototype.ontouchend=function(t){return this},Imba.POINTER=new Imba.Pointer,Imba.POINTERS=[Imba.POINTER],Imba.KEYMAP={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"break",20:"caps",27:"esc",32:"space",35:"end",36:"home",37:"larr",38:"uarr",39:"rarr",40:"darr",45:"insert",46:"delete",107:"plus",106:"mult",91:"meta"},Imba.CHARMAP={"%":"modulo","*":"multiply","+":"add","-":"sub","/":"divide",".":"dot"},Imba.Event=function(t){this.setEvent(t),this.setBubble(!0)},Imba.Event.prototype.__event={name:"event"},Imba.Event.prototype.event=function(t){return this._event},Imba.Event.prototype.setEvent=function(t){return this._event=t,this},Imba.Event.prototype.__target={name:"target"},Imba.Event.prototype.target=function(t){return this._target},Imba.Event.prototype.setTarget=function(t){return this._target=t,this},Imba.Event.prototype.__prefix={name:"prefix"},Imba.Event.prototype.prefix=function(t){return this._prefix},Imba.Event.prototype.setPrefix=function(t){return this._prefix=t,this},Imba.Event.prototype.__data={name:"data"},Imba.Event.prototype.data=function(t){return this._data},Imba.Event.prototype.setData=function(t){return this._data=t,this},Imba.Event.prototype.__source={name:"source"},Imba.Event.prototype.source=function(t){return this._source},Imba.Event.prototype.setSource=function(t){return this._source=t,this},Imba.Event.prototype.__bubble={name:"bubble"},Imba.Event.prototype.bubble=function(t){return this._bubble},Imba.Event.prototype.setBubble=function(t){return this._bubble=t,this},Imba.Event.wrap=function(t){return new this(t)},Imba.Event.prototype.name=function(){return this.event().type.toLowerCase().replace(/\:/g,"")},Imba.Event.prototype.bubble=function(t){return void 0!=t?(this.setBubble(t),this):this._bubble},Imba.Event.prototype.halt=function(){return this.setBubble(!1),this},Imba.Event.prototype.cancel=function(){return this.event().preventDefault&&this.event().preventDefault(),this._cancel=!0,this},Imba.Event.prototype.target=function(){return tag$wrap(this.event()._target||this.event().target)},Imba.Event.prototype.redirect=function(t){return this._redirect=t,this},Imba.Event.prototype.keychar=function(){if(this.event()instanceof TextEvent)return this.event().data;if(this.event()instanceof KeyboardEvent){var t=this.event().keyIdentifier,e=Imba.KEYMAP[this.event().keyCode];return e||"U+"!=t.substr(0,2)||(e=String.fromCharCode(parseInt(t.substr(2),16))),e}return null},Imba.Event.prototype.keycombo=function(){var t;if(t=this.keychar()){t=Imba.CHARMAP[t]||t;var e=[],n=this.event();return n.ctrlKey&&e.push("ctrl"),n.shiftKey&&e.push("shift"),n.altKey&&e.push("alt"),n.metaKey&&e.push("cmd"),e.push(t),e.join("_").toLowerCase()}},Imba.Event.prototype.process=function(){for(var t,e,n="on"+(this._prefix||"")+this.name(),o=null,r=this.event()._target||this.event().target,i=r._responder||r;i;){if(this._redirect=null,t=tag$wrap(i)){if("string"==typeof t[e=n]||t[e]instanceof String){n=t[n];continue}if(t[n]instanceof Array){o=t[n].concat(t),n=o.shift();continue}t[n]instanceof Function&&(o?t[n].apply(t,o):t[n](this,this.data()))}if(!this.bubble()||!(i=this._redirect||(t?t.parent():i.parentNode)))break}return this},Imba.Event.prototype.x=function(){return this.event().x},Imba.Event.prototype.y=function(){return this.event().y},Imba.Event.prototype.which=function(){return this.event().which},Imba.EventManager=function(e,n){var o=this;n&&n.constructor===Object||(n={});var r=void 0!==n.events?n.events:[];o.setRoot(e),o.setListeners([]),o.setDelegators({}),o.setDelegator(function(t){return o.delegate(t),!0});for(var i=0,a=t(r),s=a.length;s>i;i++)o.register(a[i])},Imba.EventManager.prototype.__root={name:"root"},Imba.EventManager.prototype.root=function(t){return this._root},Imba.EventManager.prototype.setRoot=function(t){return this._root=t,this},Imba.EventManager.prototype.__enabled={"default":!1,watch:"enabledDidSet",name:"enabled"},Imba.EventManager.prototype.enabled=function(t){return this._enabled},Imba.EventManager.prototype.setEnabled=function(t){var e=this.enabled();return t!=e&&(t=this._enabled=t),t!=e&&this.enabledDidSet&&this.enabledDidSet(t,e,this.__enabled),this},Imba.EventManager.prototype._enabled=!1,Imba.EventManager.prototype.__listeners={name:"listeners"},Imba.EventManager.prototype.listeners=function(t){return this._listeners},Imba.EventManager.prototype.setListeners=function(t){return this._listeners=t,this},Imba.EventManager.prototype.__delegators={name:"delegators"},Imba.EventManager.prototype.delegators=function(t){return this._delegators},Imba.EventManager.prototype.setDelegators=function(t){return this._delegators=t,this},Imba.EventManager.prototype.__delegator={name:"delegator"},Imba.EventManager.prototype.delegator=function(t){return this._delegator},Imba.EventManager.prototype.setDelegator=function(t){return this._delegator=t,this},Imba.EventManager.prototype.enabledDidSet=function(t){return t?this.onenable():this.ondisable(),this},Imba.EventManager.prototype.register=function(e,n){if(void 0===n&&(n=!0),e instanceof Array){for(var o=0,r=t(e),i=r.length;i>o;o++)this.register(r[o],n);return this}if(this.delegators()[e])return this;var a=this.delegators()[e]=n instanceof Function?n:this.delegator();return this.enabled()?this.root().addEventListener(e,a,!0):void 0},Imba.EventManager.prototype.listen=function(t,e,n){return void 0===n&&(n=!0),this.listeners().push([t,e,n]),this.enabled()&&this.root().addEventListener(t,e,n),this},Imba.EventManager.prototype.delegate=function(t){var e=Imba.Event.wrap(t);return e.process(),this},Imba.EventManager.prototype.create=function(t,e,n){n&&n.constructor===Object||(n={});var o=void 0!==n.data?n.data:null,r=void 0!==n.source?n.source:null,i=Imba.Event.wrap({type:t,target:e});return o&&(i.setData(o),o),r&&(i.setSource(r),r),i},Imba.EventManager.prototype.trigger=function(t,e,n){n&&n.constructor===Object||(n={});var o=void 0!==n.data?n.data:null,r=void 0!==n.source?n.source:null,i=Imba.Event.wrap({type:t,target:e});return o&&(i.setData(o),o),r&&(i.setSource(r),r),i.process()},Imba.EventManager.prototype.emit=function(e,n,o,r){r&&r.constructor===Object||(r={});for(var i,a=(void 0!==r.dom?r.dom:!0,void 0!==r.ns?r.ns:"object"),s="on"+a,u=DOC.querySelectorAll("."+e.uid()),c=0,p=t(u),l=p.length;l>c;c++)i=p[c],i._tag&&i._tag[s]&&i._tag[s](n,o);return this},Imba.EventManager.prototype.onenable=function(){for(var e=this.delegators(),n=0,o=Object.keys(e),r=o.length;r>n;n++)this.root().addEventListener(o[n],e[o[n]],!0);for(var i,a=0,s=t(this.listeners()),u=s.length;u>a;a++)i=s[a],this.root().addEventListener(i[0],i[1],i[2]);return this},Imba.EventManager.prototype.ondisable=function(){for(var e=this.delegators(),n=0,o=Object.keys(e),r=o.length;r>n;n++)this.root().removeEventListener(o[n],e[o[n]],!0);for(var i,a=0,s=t(this.listeners()),u=s.length;u>a;a++)i=s[a],this.root().removeEventListener(i[0],i[1],i[2]);return this},ED=Imba.Events=new Imba.EventManager(document,{events:["keydown","keyup","keypress","textInput","input","change","submit","focusin","focusout","blur","contextmenu","mousedown","mouseup","mousewheel","dblclick"]}),n?(ED.listen("touchstart",function(t){return Imba.Touch.ontouchstart(t)}),ED.listen("touchmove",function(t){return Imba.Touch.ontouchmove(t)}),ED.listen("touchend",function(t){return Imba.Touch.ontouchend(t)}),ED.listen("touchcancel",function(t){return Imba.Touch.ontouchcancel(t)})):(ED.listen("click",function(t){return ED.trigger("tap",t.target)}),ED.listen("mousedown",function(t){return Imba.POINTER?Imba.POINTER.update(t).process():void 0}),ED.listen("mousemove",function(t){return Imba.POINTER?Imba.POINTER.update(t).process():void 0}),ED.listen("mouseup",function(t){return Imba.POINTER?Imba.POINTER.update(t).process():void 0})),Imba.Events.setEnabled(!0)}()},function(t,e){!function(){Imba.extendTag("htmlelement",function(t){t.prototype.__id={name:"id"},t.prototype.id=function(t){return this.getAttribute("id")},t.prototype.setId=function(t){return this.setAttribute("id",t),this},t.prototype.__tabindex={name:"tabindex"},t.prototype.tabindex=function(t){return this.getAttribute("tabindex")},t.prototype.setTabindex=function(t){return this.setAttribute("tabindex",t),this},t.prototype.__title={name:"title"},t.prototype.title=function(t){return this.getAttribute("title")},t.prototype.setTitle=function(t){return this.setAttribute("title",t),this},t.prototype.__role={name:"role"},t.prototype.role=function(t){return this.getAttribute("role")},t.prototype.setRole=function(t){return this.setAttribute("role",t),this}}),Imba.defineTag("fragment","htmlelement",function(t){t.createNode=function(){return Imba.document().createDocumentFragment()}}),Imba.defineTag("a",function(t){t.prototype.__href={dom:!0,name:"href"},t.prototype.href=function(t){return this.getAttribute("href")},t.prototype.setHref=function(t){return this.setAttribute("href",t),this}}),Imba.defineTag("abbr"),Imba.defineTag("address"),Imba.defineTag("area"),Imba.defineTag("article"),Imba.defineTag("aside"),Imba.defineTag("audio"),Imba.defineTag("b"),Imba.defineTag("base"),Imba.defineTag("bdi"),Imba.defineTag("bdo"),Imba.defineTag("big"),Imba.defineTag("blockquote"),Imba.defineTag("body"),Imba.defineTag("br"),Imba.defineTag("button",function(t){t.prototype.__autofocus={name:"autofocus"},t.prototype.autofocus=function(t){return this.getAttribute("autofocus")},t.prototype.setAutofocus=function(t){return this.setAttribute("autofocus",t),this},t.prototype.__type={dom:!0,name:"type"},t.prototype.type=function(t){return this.getAttribute("type")},t.prototype.setType=function(t){return this.setAttribute("type",t),this},t.prototype.__disabled={dom:!0,name:"disabled"},t.prototype.disabled=function(t){return this.getAttribute("disabled")},t.prototype.setDisabled=function(t){return this.setAttribute("disabled",t),this}}),Imba.defineTag("canvas"),Imba.defineTag("caption"),Imba.defineTag("cite"),Imba.defineTag("code"),Imba.defineTag("col"),Imba.defineTag("colgroup"),Imba.defineTag("data"),Imba.defineTag("datalist"),Imba.defineTag("dd"),Imba.defineTag("del"),Imba.defineTag("details"),Imba.defineTag("dfn"),Imba.defineTag("div"),Imba.defineTag("dl"),Imba.defineTag("dt"),Imba.defineTag("em"),Imba.defineTag("embed"),Imba.defineTag("fieldset"),Imba.defineTag("figcaption"),Imba.defineTag("figure"),Imba.defineTag("footer"),Imba.defineTag("form",function(t){t.prototype.__method={dom:!0,name:"method"},t.prototype.method=function(t){return this.getAttribute("method")},t.prototype.setMethod=function(t){return this.setAttribute("method",t),this},t.prototype.__action={dom:!0,name:"action"},t.prototype.action=function(t){return this.getAttribute("action")},t.prototype.setAction=function(t){return this.setAttribute("action",t),this}}),Imba.defineTag("h1"),Imba.defineTag("h2"),Imba.defineTag("h3"),Imba.defineTag("h4"),Imba.defineTag("h5"),Imba.defineTag("h6"),Imba.defineTag("head"),Imba.defineTag("header"),Imba.defineTag("hr"),Imba.defineTag("html"),Imba.defineTag("i"),Imba.defineTag("iframe",function(t){t.prototype.__src={name:"src"},t.prototype.src=function(t){return this.getAttribute("src")},t.prototype.setSrc=function(t){return this.setAttribute("src",t),this}}),Imba.defineTag("img",function(t){t.prototype.__src={name:"src"},t.prototype.src=function(t){return this.getAttribute("src")},t.prototype.setSrc=function(t){return this.setAttribute("src",t),this}}),Imba.defineTag("input",function(t){t.prototype.__name={dom:!0,name:"name"},t.prototype.name=function(t){return this.getAttribute("name")},t.prototype.setName=function(t){return this.setAttribute("name",t),this},t.prototype.__type={dom:!0,name:"type"},t.prototype.type=function(t){return this.getAttribute("type")},t.prototype.setType=function(t){return this.setAttribute("type",t),this},t.prototype.__value={dom:!0,name:"value"},t.prototype.value=function(t){return this.getAttribute("value")},t.prototype.setValue=function(t){return this.setAttribute("value",t),this},t.prototype.__required={dom:!0,name:"required"},t.prototype.required=function(t){return this.getAttribute("required")},t.prototype.setRequired=function(t){return this.setAttribute("required",t),this},t.prototype.__disabled={dom:!0,name:"disabled"},t.prototype.disabled=function(t){return this.getAttribute("disabled")},t.prototype.setDisabled=function(t){return this.setAttribute("disabled",t),this},t.prototype.__placeholder={dom:!0,name:"placeholder"},t.prototype.placeholder=function(t){return this.getAttribute("placeholder")},t.prototype.setPlaceholder=function(t){return this.setAttribute("placeholder",t),this},t.prototype.__autofocus={name:"autofocus"},t.prototype.autofocus=function(t){return this.getAttribute("autofocus")},t.prototype.setAutofocus=function(t){return this.setAttribute("autofocus",t),this},t.prototype.value=function(){return this.dom().value},t.prototype.setValue=function(t){return t!=this.dom().value&&(this.dom().value=t),this},t.prototype.checked=function(){return this.dom().checked},t.prototype.setChecked=function(t){return t!=this.dom().checked&&(this.dom().checked=t),this}}),Imba.defineTag("ins"),Imba.defineTag("kbd"),Imba.defineTag("keygen"),Imba.defineTag("label"),Imba.defineTag("legend"),Imba.defineTag("li"),Imba.defineTag("link",function(t){t.prototype.__rel={dom:!0,name:"rel"},t.prototype.rel=function(t){return this.getAttribute("rel")},t.prototype.setRel=function(t){return this.setAttribute("rel",t),this},t.prototype.__type={dom:!0,name:"type"},t.prototype.type=function(t){return this.getAttribute("type")},t.prototype.setType=function(t){return this.setAttribute("type",t),this},t.prototype.__href={dom:!0,name:"href"},t.prototype.href=function(t){return this.getAttribute("href")},t.prototype.setHref=function(t){return this.setAttribute("href",t),this},t.prototype.__media={dom:!0,name:"media"},t.prototype.media=function(t){return this.getAttribute("media")},t.prototype.setMedia=function(t){return this.setAttribute("media",t),this}}),Imba.defineTag("main"),Imba.defineTag("map"),Imba.defineTag("mark"),Imba.defineTag("menu"),Imba.defineTag("menuitem"),Imba.defineTag("meta",function(t){t.prototype.__name={dom:!0,name:"name"},t.prototype.name=function(t){return this.getAttribute("name")},t.prototype.setName=function(t){return this.setAttribute("name",t),this},t.prototype.__content={dom:!0,name:"content"},t.prototype.content=function(t){return this.getAttribute("content")},t.prototype.setContent=function(t){return this.setAttribute("content",t),this},t.prototype.__charset={dom:!0,name:"charset"},t.prototype.charset=function(t){return this.getAttribute("charset")},t.prototype.setCharset=function(t){return this.setAttribute("charset",t),this}}),Imba.defineTag("meter"),Imba.defineTag("nav"),Imba.defineTag("noscript"),Imba.defineTag("object"),Imba.defineTag("ol"),Imba.defineTag("optgroup"),Imba.defineTag("option",function(t){t.prototype.__value={dom:!0,name:"value"},t.prototype.value=function(t){return this.getAttribute("value")},t.prototype.setValue=function(t){return this.setAttribute("value",t),this}}),Imba.defineTag("output"),Imba.defineTag("p"),Imba.defineTag("param"),Imba.defineTag("pre"),Imba.defineTag("progress"),Imba.defineTag("q"),Imba.defineTag("rp"),Imba.defineTag("rt"),Imba.defineTag("ruby"),Imba.defineTag("s"),Imba.defineTag("samp"),Imba.defineTag("script",function(t){t.prototype.__src={dom:!0,name:"src"},t.prototype.src=function(t){return this.getAttribute("src")},t.prototype.setSrc=function(t){return this.setAttribute("src",t),this},t.prototype.__type={dom:!0,name:"type"},t.prototype.type=function(t){return this.getAttribute("type")},t.prototype.setType=function(t){return this.setAttribute("type",t),this}}),Imba.defineTag("section"),Imba.defineTag("select",function(t){t.prototype.__multiple={dom:!0,name:"multiple"},t.prototype.multiple=function(t){return this.getAttribute("multiple")},t.prototype.setMultiple=function(t){return this.setAttribute("multiple",t),this},t.prototype.value=function(){return this.dom().value},t.prototype.setValue=function(t){return t!=this.dom().value&&(this.dom().value=t),this}}),Imba.defineTag("small"),Imba.defineTag("source"),Imba.defineTag("span"),Imba.defineTag("strong"),Imba.defineTag("style"),Imba.defineTag("sub"),Imba.defineTag("summary"),Imba.defineTag("sup"),Imba.defineTag("table"),Imba.defineTag("tbody"),Imba.defineTag("td"),Imba.defineTag("textarea",function(t){t.prototype.__name={dom:!0,name:"name"},t.prototype.name=function(t){return this.getAttribute("name")},t.prototype.setName=function(t){return this.setAttribute("name",t),this},t.prototype.__disabled={dom:!0,name:"disabled"},t.prototype.disabled=function(t){return this.getAttribute("disabled")},t.prototype.setDisabled=function(t){return this.setAttribute("disabled",t),this},t.prototype.__required={dom:!0,name:"required"},t.prototype.required=function(t){return this.getAttribute("required")},t.prototype.setRequired=function(t){return this.setAttribute("required",t),this},t.prototype.__placeholder={dom:!0,name:"placeholder"},t.prototype.placeholder=function(t){return this.getAttribute("placeholder")},t.prototype.setPlaceholder=function(t){return this.setAttribute("placeholder",t),this},t.prototype.__value={dom:!0,name:"value"},t.prototype.value=function(t){return this.getAttribute("value")},t.prototype.setValue=function(t){return this.setAttribute("value",t),this},t.prototype.__rows={dom:!0,name:"rows"},t.prototype.rows=function(t){return this.getAttribute("rows")},t.prototype.setRows=function(t){return this.setAttribute("rows",t),this},t.prototype.__cols={dom:!0,name:"cols"},t.prototype.cols=function(t){return this.getAttribute("cols")},t.prototype.setCols=function(t){return this.setAttribute("cols",t),this},t.prototype.__autofocus={name:"autofocus"},t.prototype.autofocus=function(t){return this.getAttribute("autofocus")},t.prototype.setAutofocus=function(t){return this.setAttribute("autofocus",t),this},t.prototype.value=function(){return this.dom().value},t.prototype.setValue=function(t){return t!=this.dom().value&&(this.dom().value=t),this}}),Imba.defineTag("tfoot"),Imba.defineTag("th"),Imba.defineTag("thead"),Imba.defineTag("time"),Imba.defineTag("title"),Imba.defineTag("tr"),Imba.defineTag("track"),Imba.defineTag("u"),Imba.defineTag("ul"),Imba.defineTag("video"),Imba.defineTag("wbr")}()},function(t,e){(function(t){!function(){function e(t,e){return e&&e.indexOf?e.indexOf(t):[].indexOf.call(t,e)}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=Object.create(e.prototype),t.__super__=t.prototype.__super__=e.prototype,t.prototype.initialize=t.prototype.constructor=t}function o(t){return t?t.toArray?t.toArray():t:[]}function r(t){this.setDom(t)}function i(){return r.apply(this,arguments)}function a(){return r.apply(this,arguments)}function s(t,e){for(var n=0,o=Object.keys(e),r=o.length;r>n;n++)t[o[n]]=e[o[n]];return t.prototype=Object.create(e.prototype),t.__super__=t.prototype.__super__=e.prototype,t.prototype.initialize=t.prototype.constructor=t,t}var u="undefined"!=typeof SVGElement;Imba.document=function(){return window.document},Imba["static"]=function(t,e){return t["static"]=e,t},t.ElementTag=r,r.prototype.__object={name:"object"},r.prototype.object=function(t){return this._object},r.prototype.setObject=function(t){return this._object=t,this},r.prototype.dom=function(){return this._dom},r.prototype.setDom=function(t){return t._tag=this,this._dom=t,this},r.prototype.setRef=function(t){return this.flag(this._ref=t),this},r.prototype.setHandler=function(t,e,n){var o="on"+t;if(e instanceof Function)this[o]=e;else if(e instanceof Array){var r=e.shift();this[o]=function(t){return n[r].apply(n,e.concat(t))}}else this[o]=function(t){return n[e](t)};return this},r.prototype.setId=function(t){return this.dom().id=t,this},r.prototype.id=function(){return this.dom().id},r.prototype.setAttribute=function(t,e){var n=this.dom().getAttribute(t);return n==e?e:null!=e&&e!==!1?this.dom().setAttribute(t,e):this.dom().removeAttribute(t)},r.prototype.removeAttribute=function(t){return this.dom().removeAttribute(t)},r.prototype.getAttribute=function(t){return this.dom().getAttribute(t)},r.prototype.setContent=function(t){return this.setChildren(t),this},r.prototype.setChildren=function(t){return this._empty?this.append(t):this.empty().append(t),this._children=null,this},r.prototype.text=function(t){return arguments.length?(this.setText(t),this):this._dom.textContent},r.prototype.setText=function(t){return this._empty=!1,this._dom.textContent=null==t?t="":t,this},r.prototype.empty=function(){for(;this._dom.firstChild;)this._dom.removeChild(this._dom.firstChild);return this._children=null,this._empty=!0,this},r.prototype.remove=function(t){var e=this.dom(),n=t&&t.dom();return n&&n.parentNode==e&&e.removeChild(n),this},r.prototype.parent=function(){return tag$wrap(this.dom().parentNode)},r.prototype.log=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return n.unshift(console),Function.prototype.call.apply(console.log,n),this},r.prototype.emit=function(t,e){e&&e.constructor===Object||(e={});var n=void 0!==e.data?e.data:null,o=void 0!==e.bubble?e.bubble:!0;return Imba.Events.trigger(t,this,{data:n,bubble:o}),this},r.prototype.css=function(t,e){if(t instanceof Object)for(var n=0,o=Object.keys(t),r=o.length;r>n;n++)this.css(o[n],t[o[n]]);else if(null==e)this.dom().style.removeProperty(t);else{if(void 0==e)return this.dom().style[t];("number"==typeof e||e instanceof Number)&&t.match(/width|height|left|right|top|bottom/)&&(e+="px"),this.dom().style[t]=e}return this},r.prototype.dataset=function(t,e){if(t instanceof Object){for(var n=0,r=Object.keys(t),i=r.length;i>n;n++)this.dataset(r[n],t[r[n]]);return this}if(2==arguments.length)return this.setAttribute("data-"+t,e),this;if(t)return this.getAttribute("data-"+t);var a=this.dom().dataset;if(!a){a={};for(var s,u=0,c=o(this.dom().attributes),p=c.length;p>u;u++)s=c[u],"data-"==s.name.substr(0,5)&&(a[Imba.toCamelCase(s.name.slice(5))]=s.value)}return a},r.prototype.find=function(t){return new Imba.Selector(t,this)},r.prototype.first=function(t){return t?this.find(t).first():tag$wrap(this.dom().firstElementChild)},r.prototype.last=function(t){return t?this.find(t).last():tag$wrap(this.dom().lastElementChild)},r.prototype.child=function(t){return tag$wrap(this.dom().children[t||0])},r.prototype.children=function(t){var e=new Imba.Selector(null,this,this._dom.children);return t?e.filter(t):e},r.prototype.orphanize=function(){var t;return(t=this.dom().parentNode)&&t.removeChild(this._dom),this},r.prototype.matches=function(t){var e;return t instanceof Function?t(this):(t.query&&(t=t.query()),(e=this._dom.webkitMatchesSelector||this._dom.matches)?e.call(this._dom,t):void 0)},r.prototype.closest=function(t){if(!t)return this.parent();var e=this;for(t.query&&(t=t.query());e;){if(e.matches(t))return e;e=e.parent()}return null},r.prototype.path=function(t){var e=this,n=[];for(t&&t.query&&(t=t.query());e;)(!t||e.matches(t))&&n.push(e),e=e.parent();return n},r.prototype.parents=function(t){var e=this.parent();return e?e.path(t):[]},r.prototype.up=function(t){return t?this.parent()&&this.parent().closest(t):this.parent()},r.prototype.siblings=function(t){var e,n=this;if(!(e=this.parent()))return[];var o=this.dom().parentNode.children,r=new Imba.Selector(null,this,o);return r.filter(function(e){return e!=n&&(!t||e.matches(t))})},r.prototype.next=function(t){if(t){for(var e=this;e=e.next();)if(e.matches(t))return e;return null}return tag$wrap(this.dom().nextElementSibling)},r.prototype.prev=function(t){if(t){for(var e=this;e=e.prev();)if(e.matches(t))return e;return null}return tag$wrap(this.dom().previousElementSibling)},r.prototype.contains=function(t){return this.dom().contains(t&&t._dom||t)},r.prototype.index=function(){for(var t=0,e=this.dom();e.previousSibling;)e=e.previousSibling,t++;return t},r.prototype.insert=function(t,e){e&&e.constructor===Object||(e={});var n=void 0!==e.before?e.before:null,o=void 0!==e.after?e.after:null;return o&&(n=o.next()),t instanceof Array&&(t=t$("fragment").setContent(t).end()),n?this.dom().insertBefore(t.dom(),n.dom()):this.append(t),this},r.prototype.bind=function(t){return this.setObject(t),this},r.prototype.render=function(){return this},r.prototype.build=function(){return this.render(),this},r.prototype.commit=function(){return this},r.prototype.end=function(){return this._built?this.commit():(this._built=!0,this.build()),this},r.prototype.synced=function(){return this},r.prototype.awaken=function(){return this},r.prototype.focus=function(){return this.dom().focus(),this},r.prototype.blur=function(){return this.dom().blur(),this},r.prototype.template=function(){return null},r.prototype.prepend=function(t){var e=this._dom.childNodes[0];return e?this.insertBefore(t,e):this.appendChild(t),this},r.prototype.append=function(t){if(!t)return this;if(t instanceof Array)for(var e,n=0,r=o(t),i=r.length;i>n;n++)e=r[n],e&&this.append(e);else if("string"==typeof t||t instanceof String||"number"==typeof t||t instanceof Number){var a=Imba.document().createTextNode(t);this._dom.appendChild(a),this._empty&&(this._empty=!1)}else this._dom.appendChild(t._dom||t),this._empty&&(this._empty=!1);return this},r.prototype.insertBefore=function(t,e){return("string"==typeof t||t instanceof String)&&(t=Imba.document().createTextNode(t)),t&&e&&this.dom().insertBefore(t._dom||t,e._dom||e),this},r.prototype.appendChild=function(t){return("string"==typeof t||t instanceof String)&&(t=Imba.document().createTextNode(t)),t&&this.dom().appendChild(t._dom||t),this},r.prototype.removeChild=function(t){return t&&this.dom().removeChild(t._dom||t),this},r.prototype.toString=function(){return this._dom.toString()},r.prototype.classes=function(){return this._dom.classList},r.prototype.flags=function(){return this._dom.classList},r.prototype.flag=function(t,e){return 2!=arguments.length||e?this._dom.classList.add(t):this._dom.classList.remove(t),this},r.prototype.unflag=function(t){return this._dom.classList.remove(t),this},r.prototype.toggleFlag=function(t){return this._dom.classList.toggle(t),this},r.prototype.hasFlag=function(t){return this._dom.classList.contains(t)},r.dom=function(){if(this._dom)return this._dom;var t,e=this.__super__.constructor,n=this.prototype;if(this._isNative)this._dom=t=Imba.document().createElement(this._nodeType);else if(this._nodeType!=e._nodeType){this._dom=t=Imba.document().createElement(this._nodeType);for(var r,i=0,a=o(e.dom()),s=a.length;s>i;i++)r=a[i],t.setAttribute(r.name,r.value)}else this._dom=t=e.dom().cloneNode(!1);if(this._domFlags)for(var i=0,a=o(this._domFlags),s=a.length;s>i;i++)n.flag.call(this,a[i]);return this._dom},r.createNode=function(t,e){var n=this._dom||this.dom(),o=n.cloneNode(!1);return o},r.flag=function(t){return this.dom().classList.add(t),this},r.unflag=function(t){return this.dom().classList.remove(t),this},r.createNode=function(t,e){var n=this._dom||this.dom(),o=n.cloneNode(!1);return o},r.prototype.initialize=r,n(i,r),n(a,r),HTML_TAGS="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" "),HTML_TAGS_UNSAFE="article aside header section".split(" "),SVG_TAGS="circle defs ellipse g line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),Imba.TAGS={element:r,htmlelement:i,svgelement:a},Imba.SINGLETONS={},IMBA_TAGS=Imba.TAGS,Imba.defineTag=function(t,n,o){void 0==o&&"function"==typeof n&&(o=n,n=""),void 0==n&&(n="");var r=t.split("$"),t=r[0],i=r[1];n||(n=e(t,HTML_TAGS)>=0?"htmlelement":"div");var a=Imba.TAGS[n],u="var"==t?"vartag":t,c=new Function("return function "+u.replace(/[\s\-\:]/g,"_")+"(dom){ this.setDom(dom); }")(),p=c;if(s(p,a),p._nodeType=a._nodeType||t,p._name=t,p._ns=i,p._nodeType!=t){p._nodeFlag="_"+t.replace(/_/g,"-");var l=a._nodeClass;l=l?l.split(/\s+/g):[];var h=null;i&&-1==e(h,l)&&l.push(h=""+i+"_"),e(h,l)>=0||l.push(h=p._nodeFlag),p._nodeClass=l.join(" "),p._domFlags=l,p._isNative=!1}else p._isNative=!0;return p._dom=null,p.prototype._nodeType=p._nodeType,p.prototype._dom=null,p.prototype._built=!1,p.prototype._empty=!0,i||(Imba.TAGS[t]=p),Imba.TAGS[""+t+"$"+(i||"html")]=p,o&&o.call(p,p,p.prototype),p},Imba.defineSingletonTag=function(t,e,n){void 0==n&&"function"==typeof e&&(n=e,e=""),void 0==e&&(e="");var o=Imba.TAGS[e||"div"],r=new Function("return function "+t.replace(/[\s\-\:]/g,"_")+"(dom){ this.setDom(dom); }"),i=r(),a=s(i,o);return a._id=t,a._ns=o._ns,a._nodeType=o._nodeType,a._nodeClass=o._nodeClass,a._domFlags=o._domFlags,a._isNative=!1,a._dom=null,a._instance=null,a.prototype._dom=null,a.prototype._built=!1,a.prototype._empty=!0,Imba.SINGLETONS[t]=a,n&&n.call(a,a,a.prototype),a},Imba.extendTag=function(t,e){var n="string"==typeof t||t instanceof String?Imba.TAGS[t]:t;return e&&e&&e.call(n,n,n.prototype),n},Imba.tag=function(t){var e=Imba.TAGS[t];return new e(e.createNode())},Imba.tagWithId=function(t,e){var n=Imba.TAGS[t],o=n.createNode();return o.id=e,new n(o)},Imba.getTagSingleton=function(t){var e,n,o;return(e=Imba.SINGLETONS[t])?e&&e.Instance?e.Instance:(o=Imba.document().getElementById(t))?(n=e.Instance=new e(o),n.awaken(o),n):(o=e.createNode(),o.id=t,n=e.Instance=new e(o),n.end().awaken(o),n):(o=Imba.document().getElementById(t))?Imba.getTagForDom(o):void 0;
},Imba.getTagForDom=function(t){var e;if(!t)return null;if(t._dom)return t;if(t._tag)return t._tag;if(!t.nodeName)return null;var n=null,o=t.id,r=t.nodeName.toLowerCase(),i=t.className;if(o&&Imba.SINGLETONS[o])return Imba.getTagSingleton(o);u&&t instanceof SVGElement&&(n="svg",i=t.className.baseVal),i&&((e=i.match(/\b_([a-z\-]+)\b(?!\s*_[a-z\-]+)/))&&(r=e[1].replace(/-/g,"_")),(e=i.match(/\b([a-z]+)_\b/))&&(n=e[1]));var a=Imba.TAGS[r];return a?new a(t).awaken(t):null},t$=Imba.tag,tc$=Imba.tagWithFlags,ti$=Imba.tagWithId,tic$=Imba.tagWithIdAndFlags,id$=Imba.getTagSingleton,tag$wrap=Imba.getTagForDom}()}).call(e,function(){return this}())},function(t,e){!function(){document.documentElement.classList||(ElementTag.prototype.hasFlag=function(t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(this._dom.className)},ElementTag.prototype.addFlag=function(t){return this.hasFlag(t)?this:(this._dom.className+=(this._dom.className?" ":"")+t,this)},ElementTag.prototype.unflag=function(t){if(!this.hasFlag(t))return this;var e=new RegExp("(^|\\s)*"+t+"(\\s|$)*","g");return this._dom.className=this._dom.className.replace(e,""),this},ElementTag.prototype.toggleFlag=function(t){return this.hasFlag(t)?this.unflag(t):this.flag(t)},ElementTag.prototype.flag=function(t,e){return 2==arguments.length&&0==e?this.unflag(t):this.addFlag(t)})}()},function(t,e){!function(){function t(t){return t?t.toArray?t.toArray():t:[]}function e(n,o,r){if(o instanceof Array)for(var i=0,a=t(o),s=a.length;s>i;i++)e(n,a[i],r);else"number"==typeof o||o instanceof Number||o&&n.removeChild(o);return r}function n(e,o){if(o instanceof Array)for(var r=0,i=t(o),a=i.length;a>r;r++)n(e,i[r]);else"number"==typeof o||o instanceof Number||("string"==typeof o||o instanceof String?e.appendChild(Imba.document().createTextNode(o)):o&&e.appendChild(o))}function o(e,n,r){if(("string"==typeof n||n instanceof String)&&(n=Imba.document().createTextNode(n)),n instanceof Array)for(var i=0,a=t(n),s=a.length;s>i;i++)o(e,a[i],r);else"number"==typeof n||n instanceof Number||n&&e.insertBefore(n,r);return r}function r(t,e,r){var i=r?r.nextSibling:t._dom.firstChild;return i?(o(t,e,i),i.previousSibling):(n(t,e),t._dom.lastChild)}function i(e,n,o,i){for(var a,s=n.length,u=(o.length,n[s-1]),c=[],p=[],l=[],h=0,f=0,d=0,m=t(o),b=m.length;b>d;d++){a=m[d];var y=n.indexOf(a);if(c.push(y),-1!=y){for(var g=c.length-2;g>=0;)if(-1==c[g])g--;else{if(y>c[g])break;g=p[g]}p.push(g);var _=-1==g?0:l[g]+1;_>h&&(h=_,f=d),l.push(_)}else e.removeChild(a),p.push(-1),l.push(-1)}for(var v=[],I=c.length-1;I>=0;)-1==c[I]||I==f&&(v[c[I]]=!0,f=p[f]),I-=1;for(var T=0,m=t(n),b=m.length;b>T;T++)if(!v[T]){var x=n[T-1];r(e,m[T],x&&x._dom||i)}return u&&u._dom||i}function a(t,e,n,o){var r=e.length,a=r,s=e[r-1];if(r==n.length&&e[0]===n[0])for(;a--&&e[a]===n[a];);return-1==a?s&&s._dom||o:i(t,e,n,o)}function s(n,o,i,u,c,p){if(o===i)return o&&o._dom||o||u;if(o instanceof Array&&i instanceof Array){if(!o["static"])return a(n,o,i,u);if(o["static"]==i["static"]){for(var l=0,h=t(o),f=h.length;f>l;l++)u=s(n,h[l],i[l],u,o,l);return u}}else if("string"==typeof o||o instanceof String){var d;return i instanceof Text?(i.textContent!=o&&(i.textContent=o),d=i):(i&&e(n,i,u),d=Imba.document().createTextNode(o),r(n,d,u)),c[p]=u=d}return i&&e(n,i,u),o&&(u=r(n,o,u)),u}Imba.extendTag("htmlelement",function(e){e.prototype.setChildren=function(t){return t===this._children?this:(t&&t["static"]?this.setStaticChildren(t):t instanceof Array&&this._children instanceof Array?a(this,t,this._children,null):"string"==typeof t||t instanceof String?this.setText(t):this.empty().append(t),this._children=t,this)},e.prototype.setStaticChildren=function(e){var n,o,r=this._children||[],i=null;if(1==e.length&&("string"==typeof e[n=0]||e[n]instanceof String))return this.setText(e[o=0]),e[o];r.length&&r["static"]||(r=[],this.empty());for(var a,u=0,c=t(e),p=c.length;p>u;u++)a=c[u],a===r[u]?a&&a._dom&&(i=a._dom):i=s(this,a,r[u],i,e,u);return this._children=e,this},e.prototype.content=function(){return this._content||this.children().toArray()},e.prototype.setText=function(t){return t!=this._children&&(this.dom().textContent=this._children=t),this}})}()},function(t,e){(function(t){!function(){"undefined"!=typeof window&&(t=window),Imba={};var e=/-./g;Imba.toCamelCase=function(t){return t.replace(e,function(t){return t.charAt(1).toUpperCase()})}}()}).call(e,function(){return this}())},function(t,e){!function(){function t(t){return t?t.toArray?t.toArray():t:[]}Imba.Selector=function(e,n,o){if(this._query=e instanceof Imba.Selector?e.query():e,this._context=n,o){for(var r=0,i=t(o),a=i.length,s=[];a>r;r++)s.push(tag$wrap(i[r]));this._nodes=s}return this._lazy=!o,this},Imba.Selector.prototype.__query={name:"query"},Imba.Selector.prototype.query=function(t){return this._query},Imba.Selector.prototype.setQuery=function(t){return this._query=t,this},Imba.Selector.prototype.reload=function(){return this._nodes=null,this},Imba.Selector.prototype.scope=function(){var t;return this._scope?this._scope:(t=this._context)?this._scope=t.toScope?t.toScope():t:Imba.document()},Imba.Selector.prototype.first=function(){return this._lazy?tag$wrap(this._first||(this._first=this.scope().querySelector(this.query()))):this.nodes()[0]},Imba.Selector.prototype.last=function(){return this.nodes()[this._nodes.length-1]},Imba.Selector.prototype.nodes=function(){if(this._nodes)return this._nodes;for(var e=this.scope().querySelectorAll(this.query()),n=0,o=t(e),r=o.length,i=[];r>n;n++)i.push(tag$wrap(o[n]));return this._nodes=i,this._lazy=!1,this._nodes},Imba.Selector.prototype.count=function(){return this.nodes().length},Imba.Selector.prototype.len=function(){return this.nodes().length},Imba.Selector.prototype.any=function(){return this.count()},Imba.Selector.prototype.at=function(t){return this.nodes()[t]},Imba.Selector.prototype.forEach=function(t){return this.nodes().forEach(t),this},Imba.Selector.prototype.map=function(t){return this.nodes().map(t)},Imba.Selector.prototype.toArray=function(){return this.nodes()},Imba.Selector.prototype.closest=function(t){return this._nodes=this.map(function(e){return e.closest(t)}),this},Imba.Selector.prototype.siblings=function(t){return this._nodes=this.map(function(e){return e.siblings(t)}),this},Imba.Selector.prototype.find=function(t){return this._nodes=this.__query__(t.query(),this.nodes()),this},Imba.Selector.prototype.children=function(t){return!0},Imba.Selector.prototype.has=function(){return!0},Imba.Selector.prototype.__union=function(){return this.p("called Imba.Selector.__union"),this},Imba.Selector.prototype.__intersect=function(){return this.p("called Imba.Selector.__union"),this},Imba.Selector.prototype.reject=function(t){return this.filter(t,!1)},Imba.Selector.prototype.filter=function(t,e){void 0===e&&(e=!0);var n=t instanceof Function&&t||function(e){return e.matches(t)},o=this.nodes().filter(function(t){return n(t)==e});return new Imba.Selector("",this._scope,o)},Imba.Selector.prototype.__query__=function(t,e){for(var n=[],o=0,r=e.length;r>o;)n.push.apply(n,e[o++].querySelectorAll(t));return n},Imba.Selector.prototype.__matches__=function(){return!0},Imba.Selector.prototype.flag=function(t){return this.forEach(function(e){return e.flag(t)})},Imba.Selector.prototype.unflag=function(t){return this.forEach(function(e){return e.unflag(t)})},Imba.Selector.prototype.call=function(t,e){var n=this;return void 0===e&&(e=[]),n.forEach(function(o){var r;return n.setFn(o[r=t]),o[r]?n.fn().apply(o,e):void 0})},q$=function(t,e){return new Imba.Selector(t,e)},q$$=function(t,e){var n=(e||Imba.document()).querySelector(t);return n&&tag$wrap(n)||null},Imba.extendTag("element",function(t){t.prototype.querySelectorAll=function(t){return this._dom.querySelectorAll(t)},t.prototype.querySelector=function(t){return this._dom.querySelector(t)},t.prototype.find=function(t){return new Imba.Selector(t,this)}})}()},function(t,e,n){var o=n(27);"string"==typeof o&&(o=[[t.id,o,""]]),n(6)(o,{}),o.locals&&(t.exports=o.locals)},function(t,e,n){var o=n(28);"string"==typeof o&&(o=[[t.id,o,""]]),n(6)(o,{}),o.locals&&(t.exports=o.locals)}]);